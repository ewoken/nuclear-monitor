{"version":3,"sources":["utils/types.js","utils/svg-icons.js","api/index.js","store/productions.js","store/unavailabilities.js","store/reactors.js","store/plants.js","store/mix.js","store/rivers.js","store/index.js","components/Link.jsx","views/HomeView/index.jsx","views/AboutView/index.jsx","utils/index.js","store/otherSelectors.js","views/MixView/components/config.js","views/MixView/components/MixComponent.jsx","views/MixView/index.jsx","views/PlantView/components/ReactorIndicator.jsx","views/PlantView/components/ReactorLoadChart.jsx","views/PlantView/components/ProductionTab.jsx","views/PlantView/components/UnavailabilitiesTab.jsx","views/PlantView/components/ReactorDetails.jsx","views/PlantView/components/PlantPictures.jsx","views/PlantView/index.jsx","components/PlantMap.jsx","components/DatePicker.jsx","HOC/buildLoader.js","components/AppLayout.jsx","components/AnalyticsComponent.jsx","App.jsx","serviceWorker.js","index.js"],"names":["ProductionType","PropTypes","shape","value","number","UnavailabilityType","id","string","isRequired","updatedAt","startDate","endDate","type","eicCode","reason","status","availablePower_MW","updates","arrayOf","object","PlantType","name","coords","coolingType","coolingPlace","wikiLink","asnLink","edfLink","pictures","ReactorType","plantId","reactorIndex","stage","thermalPower_MW","rawPower_MW","netPower_MW","buildStartDate","firstReactionDate","gridLinkDate","exploitationStartDate","moxAuthorizationDate","coolingTowerCount","dayProductions","unavailabilities","MixType","wind","solar","nuclear","gas","oil","coal","consumption","biomass","hydroPumped","hydro","imports","exports","L","DivIcon","SVGIcon","extend","options","point","initialize","Util","setOptions","this","iconSize","circleAnchor","Number","x","circleColor","color","circleFillOpacity","opacity","circleOpacity","circleWeight","weight","fillColor","fontSize","iconAnchor","y","popupAnchor","html","_createSVG","_createCircle","cx","cy","radius","circleRatio","fill","circleFillColor","fillOpacity","stroke","strokeOpacity","strokeWidth","className","_createPathDescription","height","width","margin","_createPath","pathDescription","path","circle","text","_createText","style","fontWeight","lineHeight","circleText","fontColor","replace","fontOpacity","divIcon","svgIcon","Marker","SVGMarker","latlng","icon","iconFactory","iconOptions","_latlng","onAdd","map","prototype","call","setStyle","_icon","children","iconBody","iconCircle","setAttribute","setOpacity","setIcon","marker","svgMarker","IndicatorIcon","circum","Math","PI","pieSize","loadRate","notif","pie","REACT_APP_NUCLEAR_MONITOR_API","process","doFetch","a","async","fetch","res","ok","Error","PRODUCTIONS_LOAD_ACTION","PRODUCTIONS_RECEIVE_ACTION","receiveProductionsAction","date","data","errors","initialState","productionsLoadedSelector","state","inputDate","moment","format","productions","loaded","productionsReducer","action","loading","indexBy","prop","UNAVAILABILITIES_LOAD_ACTION","UNAVAILABILITIES_RECEIVE_ACTION","receiveUnavailabilitiesAction","unavailabilitiesLoadedSelector","unavailabilitiesReducer","REACTORS_LOAD_ACTION","REACTORS_RECEIVE_ACTION","receiveReactorsAction","reactorsLoadedSelector","reactors","getStatus","currentUnavailability","find","u","isAfter","isBefore","reactorSelector","reactor","values","endOfDay","Array","from","length","d","max","concat","productionSelector","filter","unavailability","reactorUnavalabilitiesSelector","reactorsOfPlantSelector","Object","sortBy","INIT_DATA","availablePower","totalPower","availableCount","partiallyUnavailableCount","totallyUnavailableCount","reactorSetIndicatorsSelector","dateString","slotIndex","startOf","add","reactorsSelector","reduce","res2","partially","totally","reactorsReducer","PLANTS_LOAD_ACTION","PLANTS_RECEIVE_ACTION","receivePlantsAction","plantsLoadedSelector","plants","plantSelector","plantsSelector","plant","plantsReducer","MIX_LOAD_ACTION","MIX_RECEIVE_ACTION","receiveMixAction","mixLoadedSelector","mix","mixSelector","mixReducer","RIVERS_LOAD_ACTION","RIVERS_RECEIVE_ACTION","receiveRiversAction","riversLoadedSelector","rivers","riversSelector","riversReducer","rootReducer","combineReducers","enhancers","applyMiddleware","thunk","enhancer","composeWithDevTools","store","createStore","Link","to","location","pathname","search","Title","HomeView","level","Content","href","target","rel","AboutView","avatar","src","content","accordion","bordered","Panel","header","key","title","frameBorder","allow","allowFullScreen","testScreenType","size","windowWidth","window","innerWidth","getWindowHeight","body","document","documentElement","scrollHeight","offsetHeight","clientHeight","v","isNaN","HEADER_HEIGHT","DRAWER_WIDTH","getCurrentDate","qs","parse","substr","toISOString","META","label","stackId","bioenergy","GRAPH_ORDER","HEADER_ORDER","EMISSION_FACTORS","MixComponent","setSlotIndex","currentDate","backgroundColor","abs","ceil","keys","sum","e","total","computeCo2","axisLine","mirror","dataKey","activeDot","dot","min","defaultValue","onChange","debounce","tipFormatter","withStateEnhancer","withState","props","isSame","hours","mixEnhancer","connect","indicatorsEnhancer","reactorSetIndicators","floor","compose","available","availabilityRate","prodAvailableRate","availableSize","hour","minutes","span","stringify","subtract","theme","display","require","StatusIndicator","twoToneColor","ReactorIndicator","prods","hourIndex","lastIndex","last","i","currentProd","absLoad","part","background","TICKS","tickFormatter","ReactorLoadChart","useState","indexSelected","setSelected","prod","onClick","activeTooltipIndex","domain","ticks","index","ProductionTab","hash","COLUMNS","render","_","unavailabilityIcon","dataIndex","expandedRowRender","withType","column","Item","INIT_STATE","page","PAGE_SIZE","UnavailabilitiesTab","stateDate","setDate","nextUnavState","setNextUnav","finishedUnavState","setFinishedUnav","useEffect","nextPage","finishedPage","input","json","getNextUnavailabilities","skip","limit","then","getFinishedUnavailabilities","mCurrentDate","initPanel","nextUnavailabilities","getInitPanel","defaultActiveKey","expandIconPosition","pagination","current","pageSize","expandRowByClick","indentSize","rowKey","columns","dataSource","pager","marginLeft","ReactorDetails","tabInput","currentTab","setTab","activeKey","TabPane","tab","renderTabBar","diff","PlantPictures","picture","alt","ReactorDetailsContainer","reacto","reactorByPlantAndIndexSelector","match","params","goTo","currentPlant","url","history","push","Option","marginRight","overlay","trigger","placement","component","props2","ICON_OPTIONS","hasNotif","plantRatio","r","PlantMap","currentPlantId","onPlantClick","drawerHeight","isSmallScreen","Map","center","zoom","marginTop","zoomControl","ZoomControl","position","TileLayer","attribution","Leaflet","river","GeoJSON","defaultProps","ConnectedPlantMap","MIN_DATE","toDate","MAX_DATE","endOf","DesktopDatePickerContainer","isOpen","setIsOpen","onDate","role","tabIndex","onKeyDown","open","disabledDate","showTime","minuteStep","secondStep","onOk","DatePicker","check","navigator","userAgent","vendor","opera","test","isMobileOrTablet","locale","okText","dismissText","DatePickerLocale","year","month","day","minute","onDismiss","minDate","maxDate","Loader","load","prevProps","prevOtherProps","omit","otherProps","equals","Component","buildLoader","loadFunction","PlantsLoader","dispatch","getPlants","catch","console","error","ReactorsLoader","getReactors","ProductionsLoader","getState","Promise","resolve","loadProductionsAction","getProductions","MixLoader","loadMixAction","rest","NaN","getMix","UnavailabilitiesLoader","loadUnavailabilitiesAction","getUnavailabilities","RiversLoader","all","AppLayout","isLoaded","currentLocation","isFullPage","spinning","indicator","visible","mask","closable","bodyStyle","padding","drawerStyle","transition","exact","MixView","PlantView","Header","mode","selectable","SubMenu","popupClassName","withRouter","matchPlantPath","matchPath","mixError","mixErrorSelector","prodError","productionsErrorSelector","unavailabilitiesError","unavailabilitiesErrorSelector","withSearch","tracker","ga","siteSpeedSampleRate","AnalyticsComponent","trackPage","set","pageview","withProps","tz","setDefault","App","Boolean","hostname","ReactDOM","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.7828db10.chunk.js","sourcesContent":["import PropTypes from 'prop-types';\n\nexport const ProductionType = PropTypes.shape({\n  // startDate: PropTypes.string.isRequired,\n  // endDate: PropTypes.string.isRequired,\n  // updatedDate: PropTypes.string.isRequired,\n  value: PropTypes.number,\n});\n\nexport const UnavailabilityType = PropTypes.shape({\n  id: PropTypes.string.isRequired,\n  updatedAt: PropTypes.string.isRequired,\n  startDate: PropTypes.string.isRequired,\n  endDate: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  eicCode: PropTypes.string.isRequired,\n  reason: PropTypes.string.isRequired,\n  status: PropTypes.string,\n  availablePower_MW: PropTypes.number.isRequired,\n  updates: PropTypes.arrayOf(PropTypes.object).isRequired,\n});\n\nexport const PlantType = PropTypes.shape({\n  id: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  coords: PropTypes.arrayOf(PropTypes.number).isRequired,\n  coolingType: PropTypes.string.isRequired,\n  coolingPlace: PropTypes.string.isRequired,\n  wikiLink: PropTypes.string.isRequired,\n  asnLink: PropTypes.string.isRequired,\n  edfLink: PropTypes.string.isRequired,\n  pictures: PropTypes.arrayOf(PropTypes.string).isRequired,\n});\n\nexport const ReactorType = PropTypes.shape({\n  eicCode: PropTypes.string.isRequired,\n  plantId: PropTypes.string.isRequired,\n  reactorIndex: PropTypes.number.isRequired,\n  name: PropTypes.string.isRequired,\n  stage: PropTypes.string.isRequired,\n  thermalPower_MW: PropTypes.number.isRequired,\n  rawPower_MW: PropTypes.number.isRequired,\n  netPower_MW: PropTypes.number.isRequired,\n  buildStartDate: PropTypes.string.isRequired,\n  firstReactionDate: PropTypes.string.isRequired,\n  gridLinkDate: PropTypes.string.isRequired,\n  exploitationStartDate: PropTypes.string.isRequired,\n  moxAuthorizationDate: PropTypes.string.isRequired,\n  coolingTowerCount: PropTypes.number.isRequired,\n  dayProductions: PropTypes.arrayOf(ProductionType).isRequired,\n  unavailabilities: PropTypes.arrayOf(UnavailabilityType).isRequired,\n});\n\nexport const MixType = PropTypes.shape({\n  wind: PropTypes.number.isRequired,\n  solar: PropTypes.number.isRequired,\n  nuclear: PropTypes.number.isRequired,\n  gas: PropTypes.number.isRequired,\n  oil: PropTypes.number.isRequired,\n  coal: PropTypes.number.isRequired,\n  consumption: PropTypes.number.isRequired,\n  biomass: PropTypes.number.isRequired,\n  hydroPumped: PropTypes.number.isRequired,\n  hydro: PropTypes.number.isRequired,\n  imports: PropTypes.number.isRequired,\n  exports: PropTypes.number.isRequired,\n});\n","/* eslint-disable */\n//Leaflet-SVGIcon\n//SVG icon for any marker class\n//Ilya Atkin\n//ilya.atkin@unh.edu\nimport Leaflet from 'leaflet';\n\nL.DivIcon.SVGIcon = L.DivIcon.extend({\n  options: {\n      \"circleText\": \"\",\n      \"className\": \"svg-icon\",\n      \"circleAnchor\": null, //defaults to [iconSize.x/2, iconSize.x/2]\n      \"circleColor\": null, //defaults to color\n      \"circleOpacity\": null, // defaults to opacity\n      \"circleFillColor\": \"rgb(255,255,255)\",\n      \"circleFillOpacity\": null, //default to opacity\n      \"circleRatio\": 0.5,\n      \"circleWeight\": null, //defaults to weight\n      \"color\": \"rgb(0,102,255)\",\n      \"fillColor\": null, // defaults to color\n      \"fillOpacity\": 0.4,\n      \"fontColor\": \"rgb(0, 0, 0)\",\n      \"fontOpacity\": \"1\",\n      \"fontSize\": null, // defaults to iconSize.x/4\n      \"fontWeight\": \"normal\",\n      \"iconAnchor\": null, //defaults to [iconSize.x/2, iconSize.y] (point tip)\n      \"iconSize\": L.point(32,48),\n      \"opacity\": 1,\n      \"popupAnchor\": null,\n      \"weight\": 2\n  },\n  initialize: function(options) {\n      options = L.Util.setOptions(this, options)\n\n      //iconSize needs to be converted to a Point object if it is not passed as one\n      options.iconSize = L.point(options.iconSize)\n\n      //in addition to setting option dependant defaults, Point-based options are converted to Point objects\n      if (!options.circleAnchor) {\n          options.circleAnchor = L.point(Number(options.iconSize.x)/2, Number(options.iconSize.x)/2)\n      }\n      else {\n          options.circleAnchor = L.point(options.circleAnchor)\n      }\n      if (!options.circleColor) {\n          options.circleColor = options.color\n      }\n      if (!options.circleFillOpacity) {\n          options.circleFillOpacity = options.opacity\n      }\n      if (!options.circleOpacity) {\n          options.circleOpacity = options.opacity\n      }\n      if (!options.circleWeight) {\n          options.circleWeight = options.weight\n      }\n      if (!options.fillColor) {\n          options.fillColor = options.color\n      }\n      if (!options.fontSize) {\n          options.fontSize = Number(options.iconSize.x/4)\n      }\n      if (!options.iconAnchor) {\n          options.iconAnchor = L.point(Number(options.iconSize.x)/2, Number(options.iconSize.y))\n      }\n      else {\n          options.iconAnchor = L.point(options.iconAnchor)\n      }\n      if (!options.popupAnchor) {\n          options.popupAnchor = L.point(0, (-0.75)*(options.iconSize.y))\n      }\n      else {\n          options.popupAnchor = L.point(options.popupAnchor)\n      }\n\n      options.html = this._createSVG()\n  },\n  _createCircle: function() {\n      var cx = Number(this.options.circleAnchor.x)\n      var cy = Number(this.options.circleAnchor.y)\n      var radius = this.options.iconSize.x/2 * Number(this.options.circleRatio)\n      var fill = this.options.circleFillColor\n      var fillOpacity = this.options.circleFillOpacity\n      var stroke = this.options.circleColor\n      var strokeOpacity = this.options.circleOpacity\n      var strokeWidth = this.options.circleWeight\n      var className = this.options.className + \"-circle\"\n\n      var circle = '<circle class=\"' + className + '\" cx=\"' + cx + '\" cy=\"' + cy + '\" r=\"' + radius +\n          '\" fill=\"' + fill + '\" fill-opacity=\"'+ fillOpacity +\n          '\" stroke=\"' + stroke + '\" stroke-opacity=' + strokeOpacity + '\" stroke-width=\"' + strokeWidth + '\"/>'\n\n      return circle\n  },\n  _createPathDescription: function() {\n      var height = Number(this.options.iconSize.y)\n      var width = Number(this.options.iconSize.x)\n      var weight = Number(this.options.weight)\n      var margin = weight / 2\n\n      var startPoint = \"M \" + margin + \" \" + (width/2) + \" \"\n      var leftLine = \"L \" + (width/2) + \" \" + (height - weight) + \" \"\n      var rightLine = \"L \" + (width - margin) + \" \" + (width/2) + \" \"\n      var arc = \"A \" + (width/4) + \" \" + (width/4) + \" 0 0 0 \" + margin + \" \" + (width/2) + \" Z\"\n\n      var d = startPoint + leftLine + rightLine + arc\n\n      return d\n  },\n  _createPath: function() {\n      var pathDescription = this._createPathDescription()\n      var strokeWidth = this.options.weight\n      var stroke = this.options.color\n      var strokeOpacity = this.options.opacity\n      var fill = this.options.fillColor\n      var fillOpacity = this.options.fillOpacity\n      var className = this.options.className + \"-path\"\n\n      var path = '<path class=\"' + className + '\" d=\"' + pathDescription +\n          '\" stroke-width=\"' + strokeWidth + '\" stroke=\"' + stroke + '\" stroke-opacity=\"' + strokeOpacity +\n          '\" fill=\"' + fill + '\" fill-opacity=\"' + fillOpacity + '\"/>'\n\n      return path\n  },\n  _createSVG: function() {\n      var path = this._createPath()\n      var circle = this._createCircle()\n      var text = this._createText()\n      var className = this.options.className + \"-svg\"\n\n      var style = \"width:\" + this.options.iconSize.x + \"px; height:\" + this.options.iconSize.y + \"px; \" + this.options.style;\n\n      var svg = '<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" class=\"' + className + '\" style=\"' + style + '\">' + path + circle + text + '</svg>'\n\n      return svg\n  },\n  _createText: function() {\n      var fontSize = this.options.fontSize + \"px\"\n      var fontWeight = this.options.fontWeight\n      var lineHeight = Number(this.options.fontSize)\n\n      var x = this.options.circleAnchor.x\n      var y = this.options.circleAnchor.y + (lineHeight * 0.35) //35% was found experimentally\n      var circleText = this.options.circleText\n      var textColor = this.options.fontColor.replace(\"rgb(\", \"rgba(\").replace(\")\", \",\" + this.options.fontOpacity + \")\")\n\n      var text = '<text text-anchor=\"middle\" x=\"' + x + '\" y=\"' + y + '\" style=\"font-size: ' + fontSize + '; font-weight: ' + fontWeight +'\" fill=\"' + textColor + '\">' + circleText + '</text>'\n\n      return text\n  }\n})\n\nL.divIcon.svgIcon = function(options) {\n  return new L.DivIcon.SVGIcon(options)\n}\n\nL.Marker.SVGMarker = L.Marker.extend({\n  options: {\n      \"iconFactory\": L.divIcon.svgIcon,\n      \"iconOptions\": {}\n  },\n  initialize: function(latlng, options) {\n      options = L.Util.setOptions(this, options)\n      options.icon = options.iconFactory(options.iconOptions)\n      this._latlng = latlng\n  },\n  onAdd: function(map) {\n      L.Marker.prototype.onAdd.call(this, map)\n  },\n  setStyle: function(style) {\n      if (this._icon) {\n          var svg = this._icon.children[0]\n          var iconBody = this._icon.children[0].children[0]\n          var iconCircle = this._icon.children[0].children[1]\n\n          if (style.color && !style.iconOptions) {\n              var stroke = style.color.replace(\"rgb\",\"rgba\").replace(\")\", \",\"+this.options.icon.options.opacity+\")\")\n              var fill = style.color.replace(\"rgb\",\"rgba\").replace(\")\", \",\"+this.options.icon.options.fillOpacity+\")\")\n              iconBody.setAttribute(\"stroke\", stroke)\n              iconBody.setAttribute(\"fill\", fill)\n              iconCircle.setAttribute(\"stroke\", stroke)\n\n              this.options.icon.fillColor = fill\n              this.options.icon.color = stroke\n              this.options.icon.circleColor = stroke\n          }\n          if (style.opacity) {\n              this.setOpacity(style.opacity)\n          }\n          if (style.iconOptions) {\n              if (style.color) { style.iconOptions.color = style.color }\n              var iconOptions = L.Util.setOptions(this.options.icon, style.iconOptions)\n              this.setIcon(L.divIcon.svgIcon(iconOptions))\n          }\n      }\n  }\n})\n\nL.marker.svgMarker = function(latlng, options) {\n  return new L.Marker.SVGMarker(latlng, options)\n}\n\nL.DivIcon.SVGIcon.IndicatorIcon = L.DivIcon.SVGIcon.extend({\n  _createCircle() {\n      const circle = L.DivIcon.SVGIcon.prototype._createCircle.call(this);\n\n      const cx = Number(this.options.circleAnchor.x)\n      const cy = Number(this.options.circleAnchor.y)\n      const radius = this.options.iconSize.x / 2 * Number(this.options.circleRatio)\n\n      const circum = Math.PI * radius;\n      const pieSize = this.options.loadRate * circum;\n\n      const notif = `<circle r=\"3\" cx=\"${5}\" cy=\"${5}\"\n        style=\"\n          fill: red;\n          stroke: none;\n        \"\n      >\n      </circle>`\n\n      const pie = `\n        <circle r=\"${radius / 2}\" cx=\"${cx}\" cy=\"${cy}\"\n          style=\"\n            transform: rotateZ(-90deg);\n            transform-origin: ${cx}px ${cy}px;\n            fill: none;\n            stroke-width: ${radius};\n            stroke: rgb(38, 166, 91);\n            stroke-dasharray: ${pieSize} ${circum};\n            \"\n        >\n        </circle>`;\n\n      return this.options.notif ? circle + pie + notif : circle + pie;\n  },\n\n  _createSVG: function() {\n    var path = this._createPath()\n    var circle = this._createCircle()\n    var text = this._createText()\n    var className = this.options.className + \"-svg\"\n\n    var style = \"width:\" + this.options.iconSize.x + \"px; height:\" + this.options.iconSize.y + \"px;\";\n\n    var svg = '<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" class=\"' + className + '\" style=\"' + style + '\">' + path + circle + text + '</svg>'\n\n    return svg\n},\n});\n","import { map } from 'ramda';\nimport qs from 'qs';\n\nconst { REACT_APP_NUCLEAR_MONITOR_API } = process.env;\n\nasync function doFetch(...args) {\n  const res = await fetch(...args);\n\n  if (!res.ok) {\n    throw new Error('Fetch error');\n  }\n  return res;\n}\n\nexport async function getRivers() {\n  return Promise.all(\n    ['garonne', 'loire', 'meuse', 'moselle', 'rhin', 'rhone', 'seine'].map(\n      river =>\n        fetch(`./rivers/${river}.json`)\n          .then(res => res.json())\n          .then(res => ({ ...res, name: river })),\n    ),\n  );\n}\n\nexport async function getPlants() {\n  const res = await doFetch(`${REACT_APP_NUCLEAR_MONITOR_API}/plants`);\n  const data = await res.json();\n\n  return data;\n}\n\nexport async function getReactors() {\n  const res = await doFetch(`${REACT_APP_NUCLEAR_MONITOR_API}/reactors`);\n  const data = await res.json();\n\n  return data;\n}\n\nexport async function getProductions({ date }) {\n  const res = await doFetch(\n    `${REACT_APP_NUCLEAR_MONITOR_API}/productions?${qs.stringify({ date })}`,\n  );\n  const data = await res.json();\n\n  return data;\n}\n\nexport async function getUnavailabilities({ date }) {\n  const res = await doFetch(\n    `${REACT_APP_NUCLEAR_MONITOR_API}/unavailabilities?${qs.stringify({\n      date,\n    })}`,\n  );\n  const data = await res.json();\n\n  return data;\n}\n\nexport async function getNextUnavailabilities(input) {\n  const res = await doFetch(\n    `${REACT_APP_NUCLEAR_MONITOR_API}/unavailabilities/next/?${qs.stringify(\n      input,\n    )}`,\n  );\n  const data = await res.json();\n\n  return data;\n}\n\nexport async function getFinishedUnavailabilities(input) {\n  const res = await doFetch(\n    `${REACT_APP_NUCLEAR_MONITOR_API}/unavailabilities/finished/?${qs.stringify(\n      input,\n    )}`,\n  );\n  const data = await res.json();\n\n  return data;\n}\n\nexport async function getMix({ date }) {\n  const res = await doFetch(\n    `${REACT_APP_NUCLEAR_MONITOR_API}/mix?${qs.stringify({ date })}`,\n  );\n  const data = await res.json();\n\n  const { mix } = data;\n  if (mix.length < 1) {\n    return [];\n  }\n\n  const rest = Array.from({ length: 25 * 4 - mix.length }).map(() =>\n    map(() => NaN, mix[0]),\n  );\n\n  return {\n    date: data.date,\n    mix: mix.concat(rest),\n  };\n}\n","import { values, indexBy, prop } from 'ramda';\nimport moment from 'moment';\n\nimport { getProductions } from '../api';\n\nexport const PRODUCTIONS_LOAD_ACTION = 'PRODUCTIONS_LOAD_ACTION';\nexport const PRODUCTIONS_RECEIVE_ACTION = 'PRODUCTIONS_RECEIVE_ACTION';\n\nfunction loadProductionsAction({ date }) {\n  return { type: PRODUCTIONS_LOAD_ACTION, date };\n}\n\nfunction receiveProductionsAction({ date, data, errors }) {\n  return { type: PRODUCTIONS_RECEIVE_ACTION, date, data, errors };\n}\n\nconst initialState = {};\nfunction productionsReducer(state = initialState, action) {\n  const { type } = action;\n  switch (type) {\n    case PRODUCTIONS_LOAD_ACTION:\n      return {\n        ...state,\n        [action.date]: {\n          loading: true,\n          loaded: false,\n          errors: null,\n          data: {},\n        },\n      };\n    case PRODUCTIONS_RECEIVE_ACTION:\n      return {\n        ...state,\n        [action.date]: {\n          loading: false,\n          loaded: !action.errors,\n          errors: action.errors || null,\n          data: indexBy(prop('eicCode'), action.data.productions),\n        },\n      };\n    default:\n      return state;\n  }\n}\n\nexport function productionsLoadedSelector({ date: inputDate }, state) {\n  const date = moment(inputDate).format('YYYY-MM-DD');\n  return state.productions[date] && state.productions[date].loaded;\n}\n\nexport function productionsErrorSelector({ date: inputDate }, state) {\n  const date = moment(inputDate).format('YYYY-MM-DD');\n  return state.productions[date] && state.productions[date].errors;\n}\n\nexport function productionsSelector({ date: inputDate }, state) {\n  const date = moment(inputDate).format('YYYY-MM-DD');\n  return state.productions[date] && values(state.productions[date].data);\n}\n\nexport function productionSelector({ date: inputDate, eicCode }, state) {\n  const date = moment(inputDate).format('YYYY-MM-DD');\n\n  if (state.productions[date] && state.productions[date].data[eicCode]) {\n    const data = state.productions[date].data[eicCode].values;\n\n    const endOfDay = Array.from({\n      length: 24 - data.length + 1,\n    }).map(() => ({ value: null }));\n    return data.map(d => ({ value: Math.max(d.value, 0) })).concat(endOfDay);\n  }\n  return null;\n}\n\nexport function loadAllProductions({ date: inputDate }) {\n  const date = moment(inputDate).format('YYYY-MM-DD');\n  return function dispatchLoadAllProductions(dispatch, getState) {\n    if (productionsLoadedSelector({ date }, getState())) {\n      return Promise.resolve();\n    }\n\n    dispatch(loadProductionsAction({ date }));\n    return getProductions({ date })\n      .then(data =>\n        dispatch(\n          receiveProductionsAction({\n            date,\n            data,\n          }),\n        ),\n      )\n      .catch(\n        errors =>\n          console.error(errors) ||\n          dispatch(receiveProductionsAction({ date, errors })),\n      );\n  };\n}\n\nexport default productionsReducer;\n","import { values } from 'ramda';\n\nimport moment from 'moment';\nimport { getUnavailabilities } from '../api';\n\nexport const UNAVAILABILITIES_LOAD_ACTION = 'UNAVAILABILITIES_LOAD_ACTION';\nexport const UNAVAILABILITIES_RECEIVE_ACTION =\n  'UNAVAILABILITIES_RECEIVE_ACTION';\n\nfunction loadUnavailabilitiesAction({ date }) {\n  return { type: UNAVAILABILITIES_LOAD_ACTION, date };\n}\n\nfunction receiveUnavailabilitiesAction({ date, data, errors }) {\n  return { type: UNAVAILABILITIES_RECEIVE_ACTION, date, data, errors };\n}\n\nconst initialState = {};\nfunction unavailabilitiesReducer(state = initialState, action) {\n  const { type } = action;\n  switch (type) {\n    case UNAVAILABILITIES_LOAD_ACTION:\n      return {\n        ...state,\n        [action.date]: {\n          loading: true,\n          loaded: true,\n          errors: null,\n          data: [],\n        },\n      };\n    case UNAVAILABILITIES_RECEIVE_ACTION:\n      return {\n        ...state,\n        [action.date]: {\n          loading: false,\n          loaded: !action.errors,\n          errors: action.errors || null,\n          data: action.data,\n        },\n      };\n    default:\n      return state;\n  }\n}\n\nexport function unavailabilitiesLoadedSelector({ date: inputDate }, state) {\n  const date = moment(inputDate).format('YYYY-MM-DD');\n  return state.unavailabilities[date] && state.unavailabilities[date].loaded;\n}\n\nexport function unavailabilitiesErrorSelector({ date: inputDate }, state) {\n  const date = moment(inputDate).format('YYYY-MM-DD');\n  return state.unavailabilities[date] && state.unavailabilities[date].errors;\n}\n\nexport function unavailabilitiesSelector({ date: inputDate }, state) {\n  const date = moment(inputDate).format('YYYY-MM-DD');\n  return values(state.unavailabilities[date].data);\n}\n\nexport function reactorUnavalabilitiesSelector(\n  { date: inputDate, eicCode },\n  state,\n) {\n  const date = moment(inputDate).format('YYYY-MM-DD');\n  return (\n    state.unavailabilities[date] &&\n    state.unavailabilities[date].data.filter(\n      unavailability => unavailability.eicCode === eicCode,\n    )\n  );\n}\n\nexport function loadAllUnavailabilities({ date: inputDate }) {\n  const date = moment(inputDate).format('YYYY-MM-DD');\n  return function dispatchLoadAllUnavailabilities(dispatch, getState) {\n    if (unavailabilitiesLoadedSelector({ date }, getState())) {\n      return Promise.resolve();\n    }\n\n    dispatch(loadUnavailabilitiesAction({ date }));\n    return getUnavailabilities({ date })\n      .then(data =>\n        dispatch(\n          receiveUnavailabilitiesAction({\n            date,\n            data,\n          }),\n        ),\n      )\n      .catch(\n        errors =>\n          console.error(errors) ||\n          dispatch(receiveUnavailabilitiesAction({ date, errors })),\n      );\n  };\n}\n\nexport default unavailabilitiesReducer;\n","import { values, indexBy, prop, sortBy } from 'ramda';\nimport moment from 'moment';\n\nimport { getReactors } from '../api';\n\nimport { productionSelector } from './productions';\nimport { reactorUnavalabilitiesSelector } from './unavailabilities';\n\nexport const REACTORS_LOAD_ACTION = 'REACTORS_LOAD_ACTION';\nexport const REACTORS_RECEIVE_ACTION = 'REACTORS_RECEIVE_ACTION';\n\nfunction loadReactorsAction() {\n  return { type: REACTORS_LOAD_ACTION };\n}\n\nfunction receiveReactorsAction({ data, errors }) {\n  return { type: REACTORS_RECEIVE_ACTION, data, errors };\n}\n\nexport function loadAllReactors() {\n  return function dispatchLoadAllReactors(dispatch) {\n    dispatch(loadReactorsAction());\n    return getReactors()\n      .then(data =>\n        dispatch(\n          receiveReactorsAction({\n            data: indexBy(prop('eicCode'), data),\n          }),\n        ),\n      )\n      .catch(\n        errors =>\n          console.error(errors) || dispatch(receiveReactorsAction({ errors })),\n      );\n  };\n}\n\nconst initialState = {\n  loading: false,\n  loaded: false,\n  errors: null,\n  data: {},\n};\n\nfunction reactorsReducer(state = initialState, action) {\n  const { type } = action;\n  switch (type) {\n    case REACTORS_LOAD_ACTION:\n      return { ...state, loading: true };\n    case REACTORS_RECEIVE_ACTION:\n      return {\n        ...state,\n        loading: false,\n        loaded: !action.errors,\n        errors: action.errors || null,\n        data: action.data || {},\n      };\n    default:\n      return state;\n  }\n}\n\nexport function reactorsLoadedSelector(state) {\n  return state.reactors.loaded;\n}\n\nfunction getStatus(unavailabilities, inputDate) {\n  const date = moment(inputDate);\n  const currentUnavailability = unavailabilities.find(\n    u => date.isAfter(u.startDate) && date.isBefore(u.endDate),\n  );\n\n  if (currentUnavailability) {\n    if (currentUnavailability.type === 'PLANNED_MAINTENANCE') {\n      if (currentUnavailability.availablePower_MW === 0) {\n        return 'PLANNED_STOP';\n      }\n      return 'PLANNED_REDUCTION';\n    }\n    if (currentUnavailability.availablePower_MW === 0) {\n      return 'AUTO_STOP';\n    }\n    return 'UNPLANNED_REDUCTION';\n  }\n  return 'RUNNING';\n}\n\nexport function reactorSelector({ eicCode, date }, state) {\n  const reactor = state.reactors.data[eicCode];\n  const dayProductions = productionSelector({ eicCode, date }, state);\n  const unavailabilities = reactorUnavalabilitiesSelector(\n    { eicCode, date },\n    state,\n  );\n\n  return {\n    ...reactor,\n    status: getStatus(unavailabilities, date),\n    dayProductions,\n    unavailabilities,\n  };\n}\n\nexport function reactorsSelector({ date }, state) {\n  return values(state.reactors.data).map(reactor =>\n    reactorSelector({ eicCode: reactor.eicCode, date }, state),\n  );\n}\n\nexport function reactorsOfPlantSelector({ plantId, date }, state) {\n  const reactors = Object.values(state.reactors.data)\n    .filter(reactor => reactor.plantId === plantId)\n    .map(reactor => reactorSelector({ eicCode: reactor.eicCode, date }, state));\n\n  return sortBy(prop('reactorIndex'), reactors);\n}\n\nconst INIT_DATA = {\n  availablePower: 0,\n  totalPower: 0,\n  availableCount: 0,\n  partiallyUnavailableCount: 0,\n  totallyUnavailableCount: 0,\n};\nexport function reactorSetIndicatorsSelector(\n  { date: dateString, slotIndex },\n  state,\n) {\n  const date = moment(dateString)\n    .startOf('day')\n    .add(slotIndex * 15, 'minutes');\n  const reactors = reactorsSelector({ date: dateString }, state);\n\n  return reactors.reduce((res, reactor) => {\n    const res2 = {\n      availablePower: 0,\n      availableCount: 0,\n      partially: 0,\n      totally: 0,\n    };\n    const currentUnavailability = reactor.unavailabilities.find(\n      u => date.isAfter(u.startDate) && date.isBefore(u.endDate),\n    );\n\n    if (currentUnavailability) {\n      if (currentUnavailability.availablePower_MW === 0) {\n        res2.totally = 1;\n      } else {\n        res2.availableCount = 1;\n        res2.partially = 1;\n      }\n      res2.availablePower = currentUnavailability.availablePower_MW;\n    } else {\n      res2.availableCount = 1;\n      res2.availablePower = reactor.netPower_MW;\n    }\n\n    return {\n      totalPower: res.totalPower + reactor.netPower_MW,\n      availablePower: res.availablePower + res2.availablePower,\n      availableCount: res.availableCount + res2.availableCount,\n      totallyUnavailableCount: res.totallyUnavailableCount + res2.totally,\n      partiallyUnavailableCount: res.partiallyUnavailableCount + res2.partially,\n    };\n  }, INIT_DATA);\n}\n\nexport function reactorByPlantAndIndexSelector(\n  { plantId, reactorIndex, date },\n  state,\n) {\n  const reacto = Object.values(state.reactors.data).find(\n    reactor =>\n      reactor.plantId === plantId && reactor.reactorIndex === reactorIndex,\n  );\n  return reacto && reactorSelector({ eicCode: reacto.eicCode, date }, state);\n}\n\nexport function reactorsOfPlant(plantId, state) {\n  return Object.values(state.reactors.data)\n    .filter(r => r.plantId === plantId)\n    .map(r => reactorSelector(r.eicCode, state));\n}\n\nexport default reactorsReducer;\n","import { values, indexBy, prop } from 'ramda';\n\nimport { getPlants } from '../api';\n\nimport { reactorsOfPlantSelector } from './reactors';\n\nexport const PLANTS_LOAD_ACTION = 'PLANTS_LOAD_ACTION';\nexport const PLANTS_RECEIVE_ACTION = 'PLANTS_RECEIVE_ACTION';\n\nfunction loadPlantsAction() {\n  return { type: PLANTS_LOAD_ACTION };\n}\n\nfunction receivePlantsAction({ data, errors }) {\n  return { type: PLANTS_RECEIVE_ACTION, data, errors };\n}\n\nexport function loadAllPlants() {\n  return function dispatchLoadAllPlants(dispatch) {\n    dispatch(loadPlantsAction());\n    return getPlants()\n      .then(data =>\n        dispatch(\n          receivePlantsAction({\n            data: indexBy(prop('id'), data),\n          }),\n        ),\n      )\n      .catch(\n        errors =>\n          console.error(errors) || dispatch(receivePlantsAction({ errors })),\n      );\n  };\n}\n\nconst initialState = {\n  loading: false,\n  loaded: false,\n  errors: null,\n  data: {},\n};\n\nfunction plantsReducer(state = initialState, action) {\n  const { type } = action;\n  switch (type) {\n    case PLANTS_LOAD_ACTION:\n      return { ...state, loading: true };\n    case PLANTS_RECEIVE_ACTION:\n      return {\n        ...state,\n        loading: false,\n        loaded: !action.errors,\n        errors: action.errors || null,\n        data: action.data || {},\n      };\n    default:\n      return state;\n  }\n}\n\nexport function plantsLoadedSelector(state) {\n  return state.plants.loaded;\n}\n\nexport function plantSelector({ plantId, date }, state) {\n  return (\n    state.plants.data[plantId] && {\n      ...state.plants.data[plantId],\n      reactors: reactorsOfPlantSelector({ plantId, date }, state),\n    }\n  );\n}\n\nexport function plantsSelector({ date }, state) {\n  return values(state.plants.data).map(plant =>\n    plantSelector({ plantId: plant.id, date }, state),\n  );\n}\n\nexport default plantsReducer;\n","import moment from 'moment';\n\nimport { getMix } from '../api';\n\nexport const MIX_LOAD_ACTION = 'MIX_LOAD_ACTION';\nexport const MIX_RECEIVE_ACTION = 'MIX_RECEIVE_ACTION';\n\nfunction loadMixAction({ date }) {\n  return { type: MIX_LOAD_ACTION, date };\n}\n\nfunction receiveMixAction({ date, data, errors }) {\n  return { type: MIX_RECEIVE_ACTION, date, data, errors };\n}\n\nconst initialState = {};\nfunction mixReducer(state = initialState, action) {\n  const { type } = action;\n  switch (type) {\n    case MIX_LOAD_ACTION:\n      return {\n        ...state,\n        [action.date]: {\n          loading: true,\n          loaded: false,\n          errors: null,\n          data: {},\n        },\n      };\n    case MIX_RECEIVE_ACTION:\n      return {\n        ...state,\n        [action.date]: {\n          loading: false,\n          loaded: !action.errors,\n          errors: action.errors || null,\n          data: action.data.mix,\n        },\n      };\n    default:\n      return state;\n  }\n}\n\nexport function mixLoadedSelector({ date: inputDate }, state) {\n  const date = moment(inputDate).format('YYYY-MM-DD');\n  return state.mix[date] && state.mix[date].loaded;\n}\n\nexport function mixErrorSelector({ date: inputDate }, state) {\n  const date = moment(inputDate).format('YYYY-MM-DD');\n  return state.mix[date] && state.mix[date].errors;\n}\n\nexport function mixSelector({ date: inputDate }, state) {\n  const date = moment(inputDate).format('YYYY-MM-DD');\n  return state.mix[date] && state.mix[date].data;\n}\n\nexport function loadAllMix({ date: inputDate }) {\n  const date = moment(inputDate).format('YYYY-MM-DD');\n  return function dispatchLoadAllMix(dispatch, getState) {\n    if (mixLoadedSelector({ date }, getState())) {\n      return Promise.resolve();\n    }\n\n    dispatch(loadMixAction({ date }));\n    return getMix({ date })\n      .then(data =>\n        dispatch(\n          receiveMixAction({\n            date,\n            data,\n          }),\n        ),\n      )\n      .catch(\n        errors =>\n          console.error(errors) || dispatch(receiveMixAction({ date, errors })),\n      );\n  };\n}\n\nexport default mixReducer;\n","import { getRivers } from '../api';\n\nexport const RIVERS_LOAD_ACTION = 'RIVERS_LOAD_ACTION';\nexport const RIVERS_RECEIVE_ACTION = 'RIVERS_RECEIVE_ACTION';\n\nfunction loadRiversAction() {\n  return { type: RIVERS_LOAD_ACTION };\n}\n\nfunction receiveRiversAction({ data, errors }) {\n  return { type: RIVERS_RECEIVE_ACTION, data, errors };\n}\n\nexport function loadAllRivers() {\n  return function dispatchLoadAllRivers(dispatch) {\n    dispatch(loadRiversAction());\n    return getRivers()\n      .then(data =>\n        dispatch(\n          receiveRiversAction({\n            data,\n          }),\n        ),\n      )\n      .catch(\n        errors =>\n          console.error(errors) || dispatch(receiveRiversAction({ errors })),\n      );\n  };\n}\n\nconst initialState = {\n  loading: false,\n  loaded: false,\n  errors: null,\n  data: {},\n};\n\nfunction riversReducer(state = initialState, action) {\n  const { type } = action;\n  switch (type) {\n    case RIVERS_LOAD_ACTION:\n      return { ...state, loading: true };\n    case RIVERS_RECEIVE_ACTION:\n      return {\n        ...state,\n        loading: false,\n        loaded: !action.errors,\n        errors: action.errors || null,\n        data: action.data || {},\n      };\n    default:\n      return state;\n  }\n}\n\nexport function riversLoadedSelector(state) {\n  return state.rivers.loaded;\n}\n\nexport function riversSelector(state) {\n  return state.rivers.data;\n}\n\nexport default riversReducer;\n","import { createStore, combineReducers, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension/developmentOnly';\nimport thunk from 'redux-thunk';\n\nimport plantsReducer from './plants';\nimport reactorsReducer from './reactors';\nimport productionsReducer from './productions';\nimport mixReducer from './mix';\nimport unavailabilitiesReducer from './unavailabilities';\nimport riversReducer from './rivers';\n\nconst rootReducer = combineReducers({\n  // ...reducers,\n  plants: plantsReducer,\n  reactors: reactorsReducer,\n  productions: productionsReducer,\n  mix: mixReducer,\n  unavailabilities: unavailabilitiesReducer,\n  rivers: riversReducer,\n});\n\nconst enhancers = [applyMiddleware(thunk)];\nconst composeEnhancers = composeWithDevTools({\n  // actionSanitizer,\n  // stateSanitizer,\n});\nconst enhancer = composeEnhancers(...enhancers);\n\nconst store = createStore(rootReducer, enhancer);\n\nexport default store;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Link as RouterLink } from 'react-router-dom';\n\nfunction Link({ to, children }) {\n  return (\n    <RouterLink to={location => ({ pathname: to, search: location.search })}>\n      {children}\n    </RouterLink>\n  );\n}\n\nLink.propTypes = {\n  to: PropTypes.string.isRequired,\n  children: PropTypes.node.isRequired,\n};\n\nexport default Link;\n","import React from 'react';\n\nimport { Typography } from 'antd';\nimport Link from '../../components/Link';\n\nconst { Title } = Typography;\n\nfunction HomeView() {\n  return (\n    <div className=\"HomeView\">\n      <Title level={2}>Bienvenue</Title>\n      <div>\n        <strong>Nuclear monitor</strong>\n        {' vous permet de consulter:'}\n        <ul>\n          <li>\n            {'le '}\n            <Link to=\"/mix\">mix</Link>\n            {\" de production d'électricité\"}\n          </li>\n          <li>\n            {\"l'état d'une \"}\n            <Link to=\"/plant/GRAVELINES\">centrale</Link>\n            {\" ou d'un \"}\n            <Link to=\"/plant/BLAYAIS/3\">réacteur</Link>\n          </li>\n        </ul>\n      </div>\n      <div className=\"HomeView__marker\">\n        Cliquer sur une centrale pour en savoir plus...\n      </div>\n    </div>\n  );\n}\n\nexport default HomeView;\n","import React from 'react';\n\nimport { Comment, Avatar, Icon, Collapse } from 'antd';\n\nimport './index.css';\n\nfunction Content() {\n  return (\n    <div>\n      <p>\n        {'Ce site est open-source, vous pouvez consulter son code source ici: '}\n        <br />\n        <a\n          href=\"https://github.com/ewoken/nuclear-monitor\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          <Icon type=\"github\" />\n          {' nuclear-monitor'}\n        </a>\n      </p>\n\n      <p>\n        {\n          \"N'hésitez pas à me remontez des bugs ou suggestions sur Github ou Twitter:\"\n        }\n        <br />\n        <a\n          href=\"https://twitter.com/Yugnat95\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          <Icon type=\"twitter\" />\n          {' @Yugnat95'}\n        </a>\n      </p>\n\n      <p>\n        {\"D'autres sites pour suivre les données électriques:\"}\n        <ul>\n          <li>\n            <a\n              href=\"https://www.rte-france.com/fr/eco2mix/eco2mix-mix-energetique\"\n              target=\"blanck\"\n            >\n              éco2mix\n            </a>\n          </li>\n          <li>\n            <a href=\"https://www.electricitymap.org\" target=\"blanck\">\n              electricity-map\n            </a>\n          </li>\n          <li>\n            <a href=\"http://www.facteurs-charge.fr/\" target=\"blanck\">\n              facteurs-charge.fr\n            </a>\n          </li>\n        </ul>\n      </p>\n    </div>\n  );\n}\n\nfunction AboutView() {\n  return (\n    <div className=\"AboutView\">\n      <h2>À propos</h2>\n      <div>\n        <Comment\n          avatar={\n            // eslint-disable-next-line react/jsx-wrap-multilines\n            <a\n              href=\"https://github.com/ewoken\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              <Avatar src=\"https://avatars3.githubusercontent.com/u/8919530?s=460&v=4\" />\n            </a>\n          }\n          // author={<a href=\"https://github.com/ewoken\">Ewoken</a>}\n          content={<Content />}\n        />\n      </div>\n      <h2>Foire aux questions</h2>\n      <Collapse accordion bordered={false}>\n        <Collapse.Panel\n          header=\"Comment fonctionne un réacteur nucléaire ?\"\n          key=\"1\"\n        >\n          Explication en moins de 3 min:\n          <iframe\n            title=\"Youtube\"\n            width=\"100%\"\n            src=\"https://www.youtube.com/embed/I09DhTubNqE\"\n            frameBorder=\"0\"\n            allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\"\n            allowFullScreen\n          />\n          {`Si vous voulez plus de détails, nous vous recommendons d'aller regarder les épisodes dédiés de `}\n          <a href=\"https://www.youtube.com/channel/UC1EacOJoqsKaYxaDomTCTEQ\">\n            {'Le Réveilleur '}\n            <Icon type=\"youtube\" />\n          </a>\n          {' sur Youtube'}\n        </Collapse.Panel>\n        <Collapse.Panel\n          header=\"Pourquoi un réacteur est-il à l’arrêt ?\"\n          key=\"2\"\n        >\n          {\"Un réacteur peut être à l'arrêt pour différentes raisons:\"}\n          <ul>\n            <li>\n              le rechargement d&apos;une partie du combustible, nécessaire tous\n              les 12 à 18 mois;\n            </li>\n            <li>\n              {`une maintenance a été prévue et nécessite l'arrêt du réacteur lors d'une période de faible consommation;`}\n            </li>\n            <li>un incident ou une défaillance est survenue.</li>\n          </ul>\n        </Collapse.Panel>\n        <Collapse.Panel\n          header=\"Pourquoi certains réacteurs ne tournent pas à puissance maximale ?\"\n          key=\"3\"\n        >\n          {\n            'Un réacteur peut fonctionner à puissance réduite pour différentes raisons:'\n          }\n          <ul>\n            <li>\n              la consommation ne nécessite pas toute la puissance du réacteur\n            </li>\n            <li>\n              une maintenance ne nécessitant pas l&apos;arrêt du réacteur est en\n              cours.\n            </li>\n          </ul>\n        </Collapse.Panel>\n        <Collapse.Panel header=\"Pourquoi cette application ?\" key=\"4\">\n          Cette application a pour but de matérialiser et rendre accessible les\n          informations disponibles sur l&apos;ensemble du parc électro-nucléaire\n          français.\n        </Collapse.Panel>\n        <Collapse.Panel header=\"Quelles sont les sources de données ?\" key=\"5\">\n          {\n            \"Les données de disponibilités, de production et de consommation sont disponibles gratuitement via l'API de \"\n          }\n          <a href=\"https://data.rte-france.com/\">RTE</a>\n        </Collapse.Panel>\n        <Collapse.Panel\n          header=\"Comment est calculé le facteur d’émission de GES de la production électrique \"\n          key=\"6\"\n        >\n          {\n            \"Le facteur d'émission de la production électrique est calculé à partir du facteur d'émissions en cycle de vie de chaque type de production. La source principalement utilisée est l'\"\n          }\n          <a href=\"http://www.bilans-ges.ademe.fr/\">ADEME</a>\n          {' mais aussi le '}\n          <a href=\"https://www.ipcc.ch/site/assets/uploads/2018/02/ipcc_wg3_ar5_annex-iii.pdf\">\n            GIEC (p. 1335)\n          </a>\n          {\" pour le facteur d'émission des bioénergies.\"}\n          <br />\n          {\n            'Enfin, les imports sont moyennés à 400 gCO₂eq/kWh (moyenne européenne)'\n          }\n        </Collapse.Panel>\n        <Collapse.Panel\n          header=\"Pourquoi certaines centrales ont des aéroréfrigérants et d’autres pas ?\"\n          key=\"7\"\n        >\n          Certaines centrales, comme celles en bord de mer (mais pas que), sont\n          refroidis en cycle ouvert, l&apos;eau utilisée est rejetée directement\n          dans l&apos;environnement.\n          <br />\n          D&apos;autres fonctionnent en cycle fermé, c&apos;est à dire que\n          l&apos;eau utilisée est refroidie dans les aéroréfrigérants (et une\n          partie s&apos;évapore) puis est réutilisée. Cela permet de réduire\n          l&apos;eau prélevée dans l&apos;environnement (les fleuves).\n        </Collapse.Panel>\n        <Collapse.Panel\n          header=\"Comment la puissance d’un réacteur peut-elle être supérieure à sa puissance nominale ?\"\n          key=\"8\"\n        >\n          Un réacteur a pleine puissance peut parfois produire plus\n          d&apos;électricité que sa puissance nominale. En effet, lorsque la\n          source de refroidissement de la centrale est plus froide que prévue,\n          le rendement thermodynamique est amélioré faisant gagner un peu de\n          puissance.\n          <br />\n          Une autre possibilité est que la consommation interne de la centrale\n          est réduite, ce qui augmente l&apos;électricité distribuée en sortie\n          de la centrale.\n        </Collapse.Panel>\n      </Collapse>\n    </div>\n  );\n}\n\nexport default AboutView;\n","// eslint-disable-next-line import/prefer-default-export\nexport function testScreenType(size) {\n  const windowWidth = window.innerWidth;\n\n  switch (size) {\n    case 'xs':\n      return windowWidth < 576;\n    case 'sm':\n      return windowWidth >= 576;\n    case 'md':\n      return windowWidth >= 768;\n    case 'lg':\n      return windowWidth >= 992;\n    case 'xl':\n      return windowWidth >= 1200;\n    case 'xxl':\n      return windowWidth >= 1600;\n    default:\n      return false;\n  }\n}\n\nexport function isMobileOrTablet() {\n  let check = false;\n  (function test(a) {\n    if (\n      /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(\n        a,\n      ) ||\n      /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(\n        a.substr(0, 4),\n      )\n    ) {\n      check = true;\n    }\n  })(navigator.userAgent || navigator.vendor || window.opera);\n  return check;\n}\n\nexport function getWindowHeight() {\n  const { body } = document;\n  const html = document.documentElement;\n  return Math.max(\n    body.scrollHeight,\n    body.offsetHeight,\n    html.clientHeight,\n    html.scrollHeight,\n    html.offsetHeight,\n  );\n}\n\nexport function format(v) {\n  // eslint-disable-next-line no-restricted-globals\n  return isNaN(v) ? '-' : `${v}`;\n}\n\nexport const HEADER_HEIGHT = 64;\nexport const DRAWER_WIDTH = 400;\n","import moment from 'moment-timezone';\nimport qs from 'qs';\n\n// eslint-disable-next-line import/prefer-default-export\nexport function getCurrentDate(location) {\n  return (\n    qs.parse(location.search.substr(1)).date ||\n    moment()\n      .startOf('hour')\n      .toISOString()\n  );\n}\n","export const META = {\n  hydroPumped: {\n    label: 'POMPAGE',\n    color: '#114774',\n    stackId: '2',\n  },\n  bioenergy: {\n    label: 'BIOENERG.',\n    color: '#166a57',\n  },\n  wind: {\n    label: 'EOLIEN',\n    color: '#74cdb9',\n  },\n  solar: {\n    label: 'SOLAIRE',\n    color: '#f27406',\n  },\n  nuclear: {\n    label: 'NUCLEAIRE',\n    color: '#f5b300',\n  },\n  hydro: {\n    label: 'HYDRAU.',\n    color: '#2772b2',\n  },\n  gas: {\n    label: 'GAS',\n    color: '#f30a0a',\n  },\n  coal: {\n    label: 'CHARBON',\n    color: '#ac8c35',\n  },\n  oil: {\n    label: 'FIOUL',\n    color: '#8356a2',\n  },\n  exports: {\n    label: 'EXPORTS',\n    color: '#969696',\n    stackId: '2',\n  },\n  imports: {\n    label: 'IMPORTS',\n    color: '#969696',\n  },\n};\n\nexport const GRAPH_ORDER = [\n  'hydroPumped',\n  'exports',\n  'bioenergy',\n  'nuclear',\n  'hydro',\n  'gas',\n  'coal',\n  'oil',\n  'wind',\n  'solar',\n  'imports',\n];\n\nexport const HEADER_ORDER = [\n  'oil',\n  'coal',\n  'gas',\n  'hydro',\n  'nuclear',\n  'solar',\n  'wind',\n  'bioenergy',\n  'hydroPumped',\n];\n\nexport const EMISSION_FACTORS = {\n  bioenergy: 230,\n  nuclear: 6,\n  hydro: 6,\n  gas: 418,\n  coal: 1060,\n  oil: 730,\n  wind: 14.1,\n  solar: 55,\n  imports: 400,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport debounce from 'lodash.debounce';\nimport moment from 'moment';\n\nimport { Slider } from 'antd';\nimport {\n  ResponsiveContainer,\n  ComposedChart,\n  Line,\n  ReferenceLine,\n  YAxis,\n  Area,\n} from 'recharts';\n\nimport { MixType } from '../../../utils/types';\n\nimport { META, HEADER_ORDER, GRAPH_ORDER, EMISSION_FACTORS } from './config';\n\nfunction format(v) {\n  // eslint-disable-next-line no-restricted-globals\n  return isNaN(v) ? '-' : `${v}`;\n}\n\nfunction computeCo2(mix) {\n  const a = Object.keys(EMISSION_FACTORS).reduce(\n    (sum, key) => ({\n      e: sum.e + mix[key] * EMISSION_FACTORS[key],\n      total: sum.total + mix[key],\n    }),\n    {\n      e: 0,\n      total: 0,\n    },\n  );\n  return a.e / a.total;\n}\n\nfunction MixComponent({ mix, slotIndex, setSlotIndex, currentDate }) {\n  return (\n    <div className=\"MixComponent\">\n      <div className=\"MixComponent__header\">\n        {HEADER_ORDER.map(key => (\n          <div\n            key={key}\n            className=\"MixComponent__header__item\"\n            style={{\n              backgroundColor: META[key].color,\n            }}\n          >\n            {format(Math.abs(mix[slotIndex][key]))}\n            <span className=\"MixComponent__header__item__small\"> MW</span>\n            <br />\n            <span className=\"MixComponent__header__item__small\">\n              {META[key].label}\n            </span>\n          </div>\n        ))}\n        <div\n          className=\"MixComponent__header__item\"\n          style={{\n            backgroundColor: META.imports.color,\n          }}\n        >\n          {format(Math.max(mix[slotIndex].imports, -mix[slotIndex].exports))}\n          <span className=\"MixComponent__header__item__small\"> MW</span>\n          <br />\n          <span className=\"MixComponent__header__item__small\">\n            {mix[slotIndex].exports < 0\n              ? META.exports.label\n              : META.imports.label}\n          </span>\n        </div>\n        {/* <div className=\"MixComponent__header__item\" /> */}\n        <div\n          className=\"MixComponent__header__item\"\n          style={{ backgroundColor: 'black' }}\n        >\n          {format(mix[slotIndex].consumption)}\n          <span className=\"MixComponent__header__item__small\"> MW</span>\n          <br />\n          <span className=\"MixComponent__header__item__small\">CONSO</span>\n        </div>\n        <div className=\"MixComponent__header__item\" style={{ color: 'black' }}>\n          {format(Math.ceil(computeCo2(mix[slotIndex])))}\n          <br />\n          <span className=\"MixComponent__header__item__small\">gCO₂eq/kWh</span>\n          {/* <br />\n          <span className=\"MixComponent__header__item__small\">EMISSIONS</span> */}\n        </div>\n      </div>\n\n      <div className=\"MixComponent__chart\">\n        <ResponsiveContainer>\n          <ComposedChart data={mix}>\n            <YAxis axisLine mirror />\n            {GRAPH_ORDER.map(key => (\n              <Area\n                key={key}\n                dataKey={key}\n                type=\"monotone\"\n                activeDot={false}\n                stroke=\"none\"\n                fill={META[key].color}\n                stackId={META[key].stackId || '1'}\n              />\n            ))}\n            <Line\n              dataKey=\"consumption\"\n              dot={false}\n              activeDot={false}\n              type=\"monotone\"\n              stroke=\"black\"\n            />\n            <ReferenceLine x={slotIndex} stroke=\"#4b4e52\" />\n          </ComposedChart>\n        </ResponsiveContainer>\n      </div>\n      <div className=\"MixComponent__sliderContainer\">\n        <Slider\n          min={0}\n          max={96}\n          style={{ width: '100%' }}\n          defaultValue={slotIndex}\n          // value={slotIndex}\n          onChange={debounce(setSlotIndex, 400)}\n          tipFormatter={\n            value =>\n              moment(currentDate)\n                .startOf('day')\n                .add(value * 15, 'minutes')\n                .format('HH:mm')\n            // eslint-disable-next-line react/jsx-curly-newline\n          }\n        />\n      </div>\n    </div>\n  );\n}\n\nMixComponent.propTypes = {\n  mix: PropTypes.arrayOf(MixType).isRequired,\n  slotIndex: PropTypes.number.isRequired,\n  setSlotIndex: PropTypes.func.isRequired,\n  currentDate: PropTypes.string.isRequired,\n};\n\nexport default MixComponent;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { withState, compose } from 'recompose';\nimport qs from 'qs';\n\nimport { Row, Col, Icon } from 'antd';\n\nimport moment from 'moment-timezone';\n\nimport { format } from '../../utils/index';\nimport { MixType } from '../../utils/types';\nimport { mixSelector } from '../../store/mix';\nimport { reactorSetIndicatorsSelector } from '../../store/reactors';\nimport { getCurrentDate } from '../../store/otherSelectors';\n\nimport './index.css';\nimport MixComponent from './components/MixComponent';\n\nfunction MixView(props) {\n  const {\n    mix,\n    slotIndex,\n    setSlotIndex,\n    reactorSetIndicators,\n    currentDate,\n  } = props;\n  const {\n    totalPower,\n    availablePower,\n    availableCount,\n    partiallyUnavailableCount,\n    totallyUnavailableCount,\n  } = reactorSetIndicators;\n\n  const total = Math.floor(totalPower / 1000);\n  const available = Math.floor(availablePower);\n  const availabilityRate = Math.floor((100 * availablePower) / totalPower);\n  const prodAvailableRate = Math.floor(\n    (100 * mix[slotIndex].nuclear) / availablePower,\n  );\n  const availableSize = Math.max(\n    ((availablePower - (mix[slotIndex].nuclear || 0)) / totalPower) * 100,\n    0,\n  );\n  const date = moment(currentDate)\n    .hour(Math.floor(slotIndex / 4))\n    .minutes(15 * (slotIndex % 4))\n    .format('DD/MM/YYYY HH:mm');\n\n  return (\n    <div className=\"MixView\">\n      <Row>\n        <Col span={24}>\n          <MixComponent\n            mix={mix}\n            slotIndex={slotIndex}\n            setSlotIndex={setSlotIndex}\n            currentDate={currentDate}\n          />\n          <div className=\"MixView__date\">\n            {moment(currentDate).isAfter('2012-01-02') ? (\n              <Link\n                to={location => ({\n                  pathname: location.pathname,\n                  search: qs.stringify({\n                    date: moment(currentDate)\n                      .subtract(1, 'day')\n                      .startOf('hour')\n                      .toISOString(),\n                  }),\n                })}\n              >\n                <Icon\n                  theme=\"twoTone\"\n                  type=\"left-circle\"\n                  style={{ fontSize: '18pt' }}\n                />\n              </Link>\n            ) : (\n              <div />\n            )}\n            <div>{date}</div>\n            {!moment().isSame(currentDate, 'day') ? (\n              <Link\n                to={location => ({\n                  pathname: location.pathname,\n                  search: qs.stringify({\n                    date: moment(currentDate)\n                      .add(1, 'day')\n                      .startOf('hour')\n                      .toISOString(),\n                  }),\n                })}\n              >\n                <Icon\n                  theme=\"twoTone\"\n                  type=\"right-circle\"\n                  style={{ fontSize: '18pt' }}\n                />\n              </Link>\n            ) : (\n              <div />\n            )}\n          </div>\n          <div className=\"MixView__nuclear\">\n            <strong>{`Parc nucléaire (${total} GW):`}</strong>\n            <div className=\"MixView__nuclear__indicator\">\n              <div\n                className=\"MixView__nuclear__indicator__prod\"\n                style={{\n                  display: mix[slotIndex].nuclear ? 'inherit' : 'none',\n                  width: `${((mix[slotIndex].nuclear || 0) / totalPower) *\n                    100}%`,\n                }}\n              >\n                <div>{`Prod: ${format(mix[slotIndex].nuclear)} MW`}</div>\n                <div>{`${format(prodAvailableRate)}% du dispo.`}</div>\n              </div>\n              <div\n                className=\"MixView__nuclear__indicator__available\"\n                style={{\n                  width: `${availableSize}%`,\n                }}\n              />\n            </div>\n            <div className=\"MixView__nuclear__available\">\n              {`${availableCount} réacteurs disponibles: ${available} MW (${availabilityRate}%)`}\n            </div>\n            <div>\n              {`dont ${partiallyUnavailableCount} partiellement indisponible${\n                partiallyUnavailableCount > 1 ? 's' : ''\n              }`}\n            </div>\n            <div className=\"MixView__nuclear__stopped\">\n              {`${totallyUnavailableCount} réacteur${\n                totallyUnavailableCount > 1 ? 's' : ''\n              } arrêté${totallyUnavailableCount > 1 ? 's' : ''}`}\n            </div>\n          </div>\n        </Col>\n      </Row>\n    </div>\n  );\n}\n\nMixView.propTypes = {\n  mix: PropTypes.arrayOf(MixType).isRequired,\n  slotIndex: PropTypes.number.isRequired,\n  setSlotIndex: PropTypes.func.isRequired,\n  reactorSetIndicators: PropTypes.shape({\n    availablePower: PropTypes.number.isRequired,\n    totalPower: PropTypes.number.isRequired,\n    availableCount: PropTypes.number.isRequired,\n    totallyUnavailableCount: PropTypes.number.isRequired,\n    partiallyUnavailableCount: PropTypes.number.isRequired,\n  }).isRequired,\n  currentDate: PropTypes.string.isRequired,\n};\n\nconst withStateEnhancer = withState('slotIndex', 'setSlotIndex', props =>\n  moment().isSame(props.currentDate, 'day')\n    ? props.mix.filter(d => !Number.isNaN(d.nuclear)).length - 1\n    : moment(props.currentDate).hours() * 4,\n);\n\nconst mixEnhancer = connect((state, props) => {\n  const currentDate = getCurrentDate(props.location);\n\n  return {\n    currentDate,\n    mix: mixSelector({ date: currentDate }, state),\n  };\n});\n\nconst indicatorsEnhancer = connect((state, props) => ({\n  reactorSetIndicators: reactorSetIndicatorsSelector(\n    {\n      date: props.currentDate,\n      slotIndex: Math.floor(props.slotIndex / 4),\n    },\n    state,\n  ),\n}));\n\nexport default compose(\n  mixEnhancer,\n  withStateEnhancer,\n  indicatorsEnhancer,\n)(MixView);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Icon } from 'antd';\nimport moment from 'moment';\n\nconst { ReactorType } = require('../../../utils/types');\n\nfunction StatusIndicator(props) {\n  const style = { fontSize: 16 };\n  switch (props.status) {\n    case 'PLANNED_STOP':\n      return (\n        <Icon\n          type=\"tool\"\n          theme=\"filled\"\n          style={{ ...style, color: '#404040' }}\n        />\n      );\n    case 'UNPLANNED_REDUCTION':\n    case 'AUTO_STOP':\n      return (\n        <Icon\n          type=\"exclamation-circle\"\n          theme=\"twoTone\"\n          twoToneColor=\"red\"\n          style={style}\n        />\n      );\n    case 'PLANNED_REDUCTION':\n      return <Icon type=\"info-circle\" theme=\"twoTone\" style={style} />;\n    default:\n      return null;\n  }\n}\nStatusIndicator.propTypes = {\n  status: PropTypes.string.isRequired,\n};\n\nfunction ReactorIndicator(props) {\n  const { reactor, currentDate } = props;\n  const prods = reactor.dayProductions;\n  const hourIndex = moment(currentDate).hours();\n  const lastIndex = reactor.dayProductions.reduce(\n    (last, v, i) => (v.value === null ? last : i),\n    0,\n  );\n\n  const index = Math.min(lastIndex, hourIndex);\n  const currentProd = prods[index];\n  const absLoad = Math.max(0, currentProd.value);\n  const part = Math.floor((absLoad / reactor.netPower_MW) * 100);\n\n  return (\n    <div\n      className=\"ReactIndicator\"\n      style={{\n        background: `linear-gradient(0deg, #26a65b 0%, #26a65b ${part}%, rgba(255,255,255,1) ${part}%)`,\n      }}\n    >\n      <div className=\"ReactIndicator__status\">\n        <StatusIndicator status={reactor.status} />\n      </div>\n      <div className=\"ReactIndicator__prod\">\n        <strong>{Math.floor(absLoad)}</strong>\n      </div>\n      <div className=\"ReactIndicator__number\">{reactor.reactorIndex}</div>\n    </div>\n  );\n}\n\nReactorIndicator.propTypes = {\n  reactor: ReactorType.isRequired,\n  currentDate: PropTypes.string.isRequired,\n};\n\nexport default ReactorIndicator;\n","import React, { useState } from 'react';\n\nimport {\n  ResponsiveContainer,\n  AreaChart,\n  XAxis,\n  YAxis,\n  Area,\n  Tooltip,\n} from 'recharts';\n\nimport { ReactorType } from '../../../utils/types';\n\nconst TICKS = [0, 12, 24];\n\nfunction tickFormatter(value) {\n  return value ? `${value}:00` : '00:00';\n}\n\nfunction ReactorLoadChart(props) {\n  const { reactor } = props;\n  const [indexSelected, setSelected] = useState(null);\n  const hour =\n    indexSelected > 9 ? `${indexSelected}:00` : `0${indexSelected}:00`;\n  const prod =\n    indexSelected !== null &&\n    reactor.dayProductions[indexSelected].value != null\n      ? `${Math.floor(reactor.dayProductions[indexSelected].value)}`\n      : '-';\n\n  return (\n    <div key={reactor.name} className=\"ReactorLoadChart\">\n      <div>{`${indexSelected !== null ? `À ${hour}: ${prod} ` : ''}MW`}</div>\n      <div className=\"ReactorLoadChart__chart\">\n        <ResponsiveContainer>\n          <AreaChart\n            data={reactor.dayProductions}\n            onClick={v => {\n              setSelected(v && v.activeTooltipIndex);\n              return v;\n            }}\n          >\n            <XAxis\n              domain={[0, 24]}\n              ticks={TICKS}\n              tickFormatter={tickFormatter}\n            />\n            <YAxis />\n            <Area\n              dataKey=\"value\"\n              dot={false}\n              activeDot={v => {\n                setSelected(v.index);\n                return null;\n              }}\n              type=\"monotone\"\n              stroke=\"rgb(28, 114, 64)\"\n              fill=\"rgb(38, 166, 91)\"\n              fillOpacity={1}\n            />\n            <Tooltip content={() => null} />\n          </AreaChart>\n        </ResponsiveContainer>\n      </div>\n    </div>\n  );\n}\n\nReactorLoadChart.propTypes = {\n  reactor: ReactorType.isRequired,\n};\n\nexport default ReactorLoadChart;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Link as RouterLink } from 'react-router-dom';\nimport { Icon } from 'antd';\nimport moment from 'moment-timezone';\nimport qs from 'qs';\n\nimport { ReactorType } from '../../../utils/types';\n\nimport ReactorLoadChart from './ReactorLoadChart';\n\nfunction ProductionTab({ reactor, currentDate }) {\n  return (\n    <div>\n      <ReactorLoadChart reactor={reactor} />\n      <div className=\"MixView__date\">\n        {moment(currentDate).isAfter('2012-01-02') ? (\n          <RouterLink\n            to={location => ({\n              pathname: location.pathname,\n              search: qs.stringify({\n                date: moment(currentDate)\n                  .subtract(1, 'day')\n                  .startOf('hour')\n                  .toISOString(),\n              }),\n              hash: 'production',\n            })}\n          >\n            <Icon\n              theme=\"twoTone\"\n              type=\"left-circle\"\n              style={{ fontSize: '18pt' }}\n            />\n          </RouterLink>\n        ) : (\n          <div />\n        )}\n        <div>{moment(currentDate).format('DD/MM/YYYY')}</div>\n        {!moment().isSame(currentDate, 'day') ? (\n          <RouterLink\n            to={location => ({\n              pathname: location.pathname,\n              search: qs.stringify({\n                date: moment(currentDate)\n                  .add(1, 'day')\n                  .startOf('hour')\n                  .toISOString(),\n              }),\n              hash: 'production',\n            })}\n          >\n            <Icon\n              theme=\"twoTone\"\n              type=\"right-circle\"\n              style={{ fontSize: '18pt' }}\n            />\n          </RouterLink>\n        ) : (\n          <div />\n        )}\n      </div>\n    </div>\n  );\n}\n\nProductionTab.propTypes = {\n  reactor: ReactorType.isRequired,\n  currentDate: PropTypes.string.isRequired,\n};\n\nexport default ProductionTab;\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nimport moment from 'moment-timezone';\n\nimport { Icon, Descriptions, Collapse, Table, Spin } from 'antd';\n\nimport { ReactorType } from '../../../utils/types';\nimport {\n  getNextUnavailabilities,\n  getFinishedUnavailabilities,\n} from '../../../api';\n\nfunction unavailabilityIcon(unavailability) {\n  if (unavailability.type === 'PLANNED_MAINTENANCE') {\n    return unavailability.availablePower_MW > 0 ? (\n      <Icon type=\"info-circle\" theme=\"twoTone\" />\n    ) : (\n      <Icon type=\"tool\" theme=\"filled\" style={{ color: '#404040' }} />\n    );\n  }\n  return <Icon type=\"exclamation-circle\" theme=\"twoTone\" twoToneColor=\"red\" />;\n}\n\nconst COLUMNS = [\n  {\n    title: '',\n    render(_, unavailability) {\n      return unavailabilityIcon(unavailability);\n    },\n  },\n  {\n    title: 'Début',\n    dataIndex: 'startDate',\n    key: 'startDate',\n    render(startDate) {\n      return moment(startDate).format('DD/MM/YYYY');\n    },\n  },\n  {\n    title: 'Fin',\n    dataIndex: 'endDate',\n    key: 'endDate',\n    render(startDate) {\n      return moment(startDate).format('DD/MM/YYYY');\n    },\n  },\n];\n\nfunction expandedRowRender(unavailability, withType = false) {\n  return (\n    <Descriptions size=\"small\" column={1}>\n      {withType && (\n        <Descriptions.Item label=\"Type\">\n          {unavailability.type === 'PLANNED_MAINTENANCE'\n            ? 'Planifiée'\n            : 'Fortuite'}\n        </Descriptions.Item>\n      )}\n      <Descriptions.Item label=\"Puissance disponible\">\n        {`${unavailability.availablePower_MW} MW`}\n      </Descriptions.Item>\n      <Descriptions.Item label=\"Description\">\n        {unavailability.reason}\n      </Descriptions.Item>\n    </Descriptions>\n  );\n}\n\nfunction getInitPanel(currentUnavailability, nextUnavailabilities) {\n  if (currentUnavailability) {\n    return 'current';\n  }\n\n  return nextUnavailabilities && nextUnavailabilities.length > 0\n    ? 'next'\n    : 'done';\n}\n\nconst INIT_STATE = {\n  loaded: false,\n  data: {},\n  page: 1,\n};\nconst PAGE_SIZE = 10;\n\nfunction UnavailabilitiesTab(props) {\n  const { reactor, currentDate } = props;\n\n  const [stateDate, setDate] = useState(currentDate);\n  const [nextUnavState, setNextUnav] = useState(INIT_STATE);\n  const [finishedUnavState, setFinishedUnav] = useState(INIT_STATE);\n\n  useEffect(() => {\n    const nextPage = nextUnavState.page;\n    const finishedPage = finishedUnavState.page;\n\n    if (currentDate !== stateDate) {\n      setDate(currentDate);\n      setNextUnav(INIT_STATE);\n      setFinishedUnav(INIT_STATE);\n    }\n\n    if (!nextUnavState.data[nextPage]) {\n      // setNextUnav({ ...nextUnavState, loading: true });\n      getNextUnavailabilities({\n        date: currentDate,\n        eicCode: reactor.eicCode,\n        skip: (nextUnavState.page - 1) * PAGE_SIZE,\n        limit: 10,\n      }).then(res =>\n        setNextUnav({\n          ...nextUnavState,\n          loaded: true,\n          total: res.total,\n          data: { ...nextUnavState.data, [nextPage]: res.data },\n        }),\n      );\n    }\n\n    if (!finishedUnavState.data[finishedPage]) {\n      // setFinishedUnav({ ...finishedUnavState, loading: true });\n      getFinishedUnavailabilities({\n        date: currentDate,\n        eicCode: reactor.eicCode,\n        skip: (finishedUnavState.page - 1) * PAGE_SIZE,\n        limit: PAGE_SIZE,\n      }).then(res =>\n        setFinishedUnav({\n          ...finishedUnavState,\n          loaded: true,\n          total: res.total,\n          data: { ...finishedUnavState.data, [finishedPage]: res.data },\n        }),\n      );\n    }\n  }, [\n    nextUnavState,\n    finishedUnavState,\n    nextUnavState.page,\n    finishedUnavState.page,\n    reactor.eicCode,\n    stateDate,\n    currentDate,\n  ]);\n\n  const mCurrentDate = moment(currentDate);\n  const currentUnavailability = reactor.unavailabilities.find(\n    u => mCurrentDate.isAfter(u.startDate) && mCurrentDate.isBefore(u.endDate),\n  );\n  const initPanel = getInitPanel(\n    currentUnavailability,\n    nextUnavState.data['1'],\n  );\n\n  if (!finishedUnavState.loaded || !nextUnavState.loaded) {\n    return <Spin loading style={{ marginLeft: '50%' }} />;\n  }\n\n  return (\n    <div className=\"UnavailabilitiesTab\">\n      <Collapse\n        defaultActiveKey={[initPanel]}\n        accordion\n        expandIconPosition=\"right\"\n      >\n        {currentUnavailability && (\n          <Collapse.Panel\n            // eslint-disable-next-line\n            header={(\n              <span>\n                <Icon type=\"clock-circle\" theme=\"filled\" />\n                {' En cours...'}\n              </span>\n              // eslint-disable-next-line\n            )}\n            key=\"current\"\n          >\n            <Descriptions size=\"small\" column={1}>\n              <Descriptions.Item label=\"Début\">\n                {moment(currentUnavailability.startDate).format(\n                  'DD/MM/YYYY HH:mm',\n                )}\n              </Descriptions.Item>\n              <Descriptions.Item label=\"Fin\">\n                {moment(currentUnavailability.endDate).format(\n                  'DD/MM/YYYY HH:mm',\n                )}\n              </Descriptions.Item>\n              <Descriptions.Item label=\"Type\">\n                {currentUnavailability.type === 'PLANNED_MAINTENANCE'\n                  ? 'Planifiée'\n                  : 'Fortuite'}\n              </Descriptions.Item>\n              <Descriptions.Item label=\"Puissance disponible\">\n                {`${currentUnavailability.availablePower_MW} MW`}\n              </Descriptions.Item>\n              <Descriptions.Item label=\"Description\">\n                {currentUnavailability.reason}\n              </Descriptions.Item>\n            </Descriptions>\n          </Collapse.Panel>\n        )}\n        {nextUnavState.data['1'] && nextUnavState.data['1'].length > 0 && (\n          <Collapse.Panel\n            // eslint-disable-next-line\n            header={(\n              <span>\n                <Icon type=\"schedule\" theme=\"filled\" />\n                {`  À venir (${nextUnavState.total || ''})`}\n              </span>\n              // eslint-disable-next-line\n            )}\n            key=\"next\"\n          >\n            <Table\n              loading={!nextUnavState.data[nextUnavState.page]}\n              size=\"small\"\n              bordered={false}\n              pagination={\n                nextUnavState.total > PAGE_SIZE\n                  ? {\n                      current: nextUnavState.page,\n                      total: nextUnavState.total,\n                      pageSize: PAGE_SIZE,\n                    }\n                  : false\n              }\n              expandedRowRender={u => expandedRowRender(u, false)}\n              expandRowByClick\n              indentSize={0}\n              rowKey=\"id\"\n              columns={COLUMNS}\n              dataSource={nextUnavState.data[nextUnavState.page]}\n              onChange={\n                pager => setNextUnav({ ...nextUnavState, page: pager.current })\n                // eslint-disable-next-line react/jsx-curly-newline\n              }\n            />\n          </Collapse.Panel>\n        )}\n        <Collapse.Panel\n          // eslint-disable-next-line\n          header={(\n            <span>\n              <Icon type=\"check-square\" theme=\"filled\" />\n              {`  Passées (${finishedUnavState.total || ''})`}\n            </span>\n            // eslint-disable-next-line\n          )}\n          key=\"done\"\n        >\n          <Table\n            loading={!finishedUnavState.data[finishedUnavState.page]}\n            size=\"small\"\n            bordered={false}\n            pagination={\n              finishedUnavState.total > PAGE_SIZE\n                ? {\n                    current: finishedUnavState.page,\n                    total: finishedUnavState.total,\n                    pageSize: PAGE_SIZE,\n                  }\n                : false\n            }\n            expandedRowRender={u => expandedRowRender(u, true)}\n            expandRowByClick\n            indentSize={0}\n            rowKey=\"id\"\n            columns={COLUMNS}\n            dataSource={finishedUnavState.data[finishedUnavState.page]}\n            onChange={\n              pager =>\n                setFinishedUnav({ ...finishedUnavState, page: pager.current })\n              // eslint-disable-next-line react/jsx-curly-newline\n            }\n          />\n        </Collapse.Panel>\n      </Collapse>\n    </div>\n  );\n}\n\nUnavailabilitiesTab.propTypes = {\n  reactor: ReactorType.isRequired,\n  currentDate: PropTypes.string.isRequired,\n};\n\nexport default UnavailabilitiesTab;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport moment from 'moment-timezone';\n\nimport { Descriptions, Icon, Tabs } from 'antd';\n\nimport { ReactorType } from '../../../utils/types';\nimport Link from '../../../components/Link';\n\nimport ProductionTab from './ProductionTab';\nimport UnavailabilitiesTab from './UnavailabilitiesTab';\n\nfunction ReactorDetails({\n  reactor,\n  currentDate,\n  currentTab: tabInput,\n  setTab,\n}) {\n  const currentTab =\n    tabInput ||\n    (reactor.status === 'RUNNING' ? 'production' : 'unavailabilities');\n\n  return (\n    <div className=\"ReactorDetails\">\n      <div className=\"ReactorDetails__header\">\n        <div className=\"ReactorDetails__headerLine\">\n          <div className=\"ReactorDetails__headerLine__left\">\n            <div className=\"ReactorDetails__headerLine__title\">\n              {reactor.name}\n            </div>\n            <div>{`(${reactor.netPower_MW} MWe)`}</div>\n          </div>\n\n          <div>\n            <Link to={`/plant/${reactor.plantId}`}>\n              <Icon type=\"caret-up\" theme=\"filled\" />\n            </Link>\n          </div>\n        </div>\n\n        <Tabs activeKey={currentTab} type=\"card\" onChange={setTab}>\n          <Tabs.TabPane tab={<Icon type=\"bars\" />} key=\"info\"></Tabs.TabPane>\n          <Tabs.TabPane\n            tab={<Icon type=\"thunderbolt\" theme=\"filled\" />}\n            key=\"production\"\n            // eslint-disable-next-line react/jsx-closing-tag-location\n          ></Tabs.TabPane>\n          <Tabs.TabPane\n            tab={<Icon type=\"tool\" theme=\"filled\" />}\n            key=\"unavailabilities\"\n            // eslint-disable-next-line\n          ></Tabs.TabPane>\n          {/* <Tabs.TabPane tab=\"Incidents\" key=\"incidents\"></Tabs.TabPane> */}\n        </Tabs>\n      </div>\n\n      <Tabs\n        activeKey={currentTab}\n        onChange={setTab}\n        renderTabBar={() => <div />}\n      >\n        <Tabs.TabPane tab=\"\" key=\"info\">\n          <Descriptions size=\"small\" bordered column={1}>\n            <Descriptions.Item label=\"Palier\">\n              {reactor.stage}\n            </Descriptions.Item>\n            <Descriptions.Item label=\"Puissance thermique\">\n              {`${reactor.thermalPower_MW} MW`}\n            </Descriptions.Item>\n            <Descriptions.Item label=\"Puissance électrique brute\">\n              {`${reactor.rawPower_MW} MW`}\n            </Descriptions.Item>\n            <Descriptions.Item label=\"Puissance électrique nette\">\n              {`${reactor.netPower_MW} MW`}\n            </Descriptions.Item>\n            <Descriptions.Item label=\"Aéroréfrigérants\">\n              {reactor.coolingTowerCount}\n            </Descriptions.Item>\n            <Descriptions.Item label=\"Début de construction\">\n              {reactor.buildStartDate}\n            </Descriptions.Item>\n            <Descriptions.Item label=\"Divergence\">\n              {reactor.firstReactionDate}\n            </Descriptions.Item>\n            <Descriptions.Item label=\"Raccordement au réseau\">\n              {reactor.gridLinkDate}\n            </Descriptions.Item>\n            <Descriptions.Item label=\"Début d'exploitation\">\n              {reactor.exploitationStartDate}\n              <br />\n              <strong>\n                {` (${moment().diff(\n                  moment(reactor.exploitationStartDate, 'DD/MM/YYYY'),\n                  'years',\n                )} ans)`}\n              </strong>\n            </Descriptions.Item>\n            {reactor.moxAuthorizationDate && (\n              <Descriptions.Item label=\"Authorisation MOX\">\n                {reactor.moxAuthorizationDate}\n              </Descriptions.Item>\n            )}\n          </Descriptions>\n        </Tabs.TabPane>\n        <Tabs.TabPane tab=\"\" key=\"production\">\n          <ProductionTab currentDate={currentDate} reactor={reactor} />\n        </Tabs.TabPane>\n        <Tabs.TabPane tab=\"\" key=\"unavailabilities\">\n          <UnavailabilitiesTab reactor={reactor} currentDate={currentDate} />\n        </Tabs.TabPane>\n      </Tabs>\n    </div>\n  );\n}\n\nReactorDetails.propTypes = {\n  reactor: ReactorType.isRequired,\n  currentDate: PropTypes.string.isRequired,\n  currentTab: PropTypes.string.isRequired,\n  setTab: PropTypes.func.isRequired,\n};\n\nexport default ReactorDetails;\n","import React from 'react';\n\nimport { Carousel, Icon } from 'antd';\nimport { PlantType } from '../../../utils/types';\nimport Link from '../../../components/Link';\n\nfunction PlantPictures(props) {\n  const { plant } = props;\n\n  return (\n    <div className=\"PlantPictures\">\n      <div className=\"PlantPictures__header\">\n        <h3>Photos</h3>\n        <div>\n          <Link to={`/plant/${plant.id}`}>\n            <Icon type=\"caret-up\" theme=\"filled\" />\n          </Link>\n        </div>\n      </div>\n\n      <Carousel>\n        {plant.pictures.map(picture => (\n          <img key={picture} alt={plant.name} src={picture} />\n        ))}\n      </Carousel>\n    </div>\n  );\n}\n\nPlantPictures.propTypes = {\n  plant: PlantType.isRequired,\n};\n\nexport default PlantPictures;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport {\n  Route, // as BaseRoute,\n  Switch,\n  Redirect,\n} from 'react-router-dom';\nimport { Row, Col, Select, Tag, Dropdown, Menu, Button } from 'antd';\n\nimport { plantSelector, plantsSelector } from '../../store/plants';\nimport { PlantType, ReactorType } from '../../utils/types';\nimport Link from '../../components/Link';\n\nimport ReactorIndicator from './components/ReactorIndicator';\nimport {\n  reactorsOfPlantSelector,\n  reactorByPlantAndIndexSelector,\n} from '../../store/reactors';\nimport { getCurrentDate } from '../../store/otherSelectors';\n\nimport ReactorDetails from './components/ReactorDetails';\nimport PlantPictures from './components/PlantPictures';\n\nimport './index.css';\n\nconst ReactorDetailsContainer = connect((state, props) => {\n  const reactor = reactorByPlantAndIndexSelector(\n    {\n      date: props.currentDate,\n      plantId: props.match.params.plantId,\n      reactorIndex: Number(props.match.params.reactorIndex),\n    },\n    state,\n  );\n  return {\n    reactor,\n    setTab: tab =>\n      props.goTo(\n        `/plant/${reactor.plantId}/${reactor.reactorIndex}`,\n        `#${tab}`,\n      ),\n  };\n})(ReactorDetails);\n\nfunction plantMenu(plant) {\n  return (\n    <Menu>\n      <Menu.Item>\n        <a href={plant.wikiLink} target=\"_blank\" rel=\"noopener noreferrer\">\n          {/* <img className=\"PlantView__wiki\" src=\"wiki.svg\" alt=\"wiki\" /> */}\n          Wikipedia\n        </a>\n      </Menu.Item>\n      <Menu.Item>\n        <a href={plant.asnLink} target=\"_blank\" rel=\"noopener noreferrer\">\n          {/* <img className=\"PlantView__asn\" src=\"logo-asn.png\" alt=\"asn\" /> */}\n          ASN\n        </a>\n      </Menu.Item>\n      <Menu.Item>\n        <a href={plant.edfLink} target=\"_blank\" rel=\"noopener noreferrer\">\n          {/* <img className=\"PlantView__asn\" src=\"logo-asn.png\" alt=\"asn\" /> */}\n          EDF\n        </a>\n      </Menu.Item>\n    </Menu>\n  );\n}\n\nfunction PlantView(props) {\n  const {\n    currentDate,\n    currentTab,\n    plants,\n    currentPlant,\n    reactors,\n    goTo,\n  } = props;\n\n  if (!currentPlant) {\n    return <Redirect to=\"/\" />;\n  }\n\n  return (\n    <div className=\"PlantView\">\n      <Row>\n        <Col span={24}>\n          <div className=\"PlantView__firstRow\">\n            <div className=\"PlantView__firstRow__left\">\n              <Select\n                value={currentPlant.id}\n                size=\"large\"\n                onChange={id => goTo(`/plant/${id}`)}\n                style={{ width: '10em' }}\n              >\n                {plants.map(plant => (\n                  <Select.Option key={plant.id} value={plant.id}>\n                    {plant.name}\n                  </Select.Option>\n                ))}\n              </Select>\n              <span>\n                <Tag style={{ marginLeft: '8px' }}>\n                  {currentPlant.coolingType === 'SEA' ? 'Mer' : 'Fleuve'}\n                </Tag>\n              </span>\n            </div>\n            <div className=\"PlantView__firstRow__right\">\n              <Link to={`/plant/${currentPlant.id}/pictures`}>\n                <Button icon=\"picture\" style={{ marginRight: 5 }} />\n              </Link>\n              <Dropdown\n                overlay={plantMenu(currentPlant)}\n                trigger={['click']}\n                placement=\"bottomRight\"\n              >\n                <Button icon=\"more\" />\n              </Dropdown>\n            </div>\n          </div>\n\n          <div className=\"PlantView__schema\">\n            <div>Production (MW)</div>\n            <div className=\"PlantView__reactors\">\n              {reactors.map(reactor => (\n                <Link\n                  key={reactor.eicCode}\n                  to={`/plant/${currentPlant.id}/${reactor.reactorIndex}`}\n                >\n                  <ReactorIndicator\n                    reactor={reactor}\n                    currentDate={currentDate}\n                  />\n                </Link>\n              ))}\n            </div>\n            <div\n              className=\"PlantView__cooling\"\n              style={{ width: reactors.length * 50 }}\n            >\n              {currentPlant.coolingPlace}\n            </div>\n          </div>\n          <div className=\"PlantView__footer\">\n            <Switch>\n              <Route\n                path=\"/plant/:plantId/pictures\"\n                component={() => <PlantPictures plant={currentPlant} />}\n              />\n              <Route\n                path=\"/plant/:plantId/:reactorIndex\"\n                component={props2 => (\n                  <ReactorDetailsContainer\n                    // eslint-disable-next-line react/jsx-props-no-spreading\n                    {...props2}\n                    currentTab={currentTab}\n                    currentDate={currentDate}\n                    goTo={goTo}\n                  />\n                )}\n              />\n              <Route\n                component={() => (\n                  <small>(Cliquer sur un réacteur pour plus de détails)</small>\n                )}\n              />\n            </Switch>\n          </div>\n        </Col>\n      </Row>\n    </div>\n  );\n}\n\nPlantView.propTypes = {\n  currentDate: PropTypes.string.isRequired,\n  currentTab: PropTypes.string.isRequired,\n  plants: PropTypes.arrayOf(PlantType).isRequired,\n  currentPlant: PlantType.isRequired,\n  reactors: PropTypes.arrayOf(ReactorType).isRequired,\n  goTo: PropTypes.func.isRequired,\n};\n\nexport default connect((state, props) => {\n  const { plantId } = props.match.params;\n  const currentDate = getCurrentDate(props.location);\n  const currentTab = props.location.hash.substr(1);\n\n  return {\n    currentDate,\n    currentTab,\n    plants: plantsSelector({ date: currentDate }, state),\n    currentPlant: plantSelector({ plantId, date: currentDate }, state),\n    reactors: reactorsOfPlantSelector({ plantId, date: currentDate }, state),\n    goTo: (url, hash = '') =>\n      props.history.push(`${url}${props.location.search}${hash}`),\n  };\n})(PlantView);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport moment from 'moment';\n\nimport { Map, TileLayer, Marker, ZoomControl, GeoJSON } from 'react-leaflet';\n\nimport Leaflet from 'leaflet';\n\nimport {\n  testScreenType,\n  getWindowHeight,\n  HEADER_HEIGHT,\n  DRAWER_WIDTH,\n} from '../utils';\nimport { PlantType } from '../utils/types';\n\nimport { plantsSelector } from '../store/plants';\nimport { riversSelector } from '../store/rivers';\n\nconst ICON_OPTIONS = {\n  fillOpacity: 1,\n  iconSize: [24, 38],\n  circleColor: 'white',\n  circleRatio: 0.6,\n  circleWeight: 3,\n};\n\nfunction hasNotif(plant) {\n  return plant.reactors.reduce((res, reactor) => {\n    if (reactor.status !== 'RUNNING' && reactor.status !== 'PLANNED_STOP') {\n      return true;\n    }\n    return res;\n  }, false);\n}\n\nfunction plantRatio(plant, currentDate) {\n  const hourIndex = Math.max(moment(currentDate).hours(), 0);\n\n  const totalProd = plant.reactors.reduce((res, reactor) => {\n    const lastIndex = reactor.dayProductions.reduce(\n      (last, v, i) => (v.value === null ? last : i),\n      0,\n    );\n    const index = Math.min(lastIndex, hourIndex);\n\n    const prod =\n      reactor.dayProductions[index].value !== null\n        ? Math.max(reactor.dayProductions[index].value, 0)\n        : 0;\n\n    return res + prod;\n  }, 0);\n  const totalPower = plant.reactors.reduce((res, r) => res + r.netPower_MW, 0);\n\n  return totalProd / totalPower;\n}\n\nfunction PlantMap(props) {\n  const {\n    plants,\n    currentPlantId,\n    onPlantClick,\n    drawerHeight,\n    rivers,\n    currentDate,\n  } = props;\n  const isSmallScreen = !testScreenType('sm');\n  const height = getWindowHeight();\n\n  return (\n    <Map\n      center={[48.3, 2]}\n      zoom={isSmallScreen ? 5 : 6}\n      style={{\n        height: isSmallScreen\n          ? height - HEADER_HEIGHT - drawerHeight\n          : height - HEADER_HEIGHT,\n        marginTop: isSmallScreen ? HEADER_HEIGHT + drawerHeight : HEADER_HEIGHT, // TODO\n        marginLeft: isSmallScreen ? 0 : DRAWER_WIDTH,\n      }}\n      zoomControl={false}\n    >\n      <ZoomControl position=\"bottomright\" />\n      <TileLayer\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n      />\n      {plants.map(plant => (\n        <Marker\n          key={plant.id}\n          title={plant.name}\n          position={plant.coords}\n          icon={\n            plant.id === currentPlantId\n              ? new Leaflet.DivIcon.SVGIcon.IndicatorIcon({\n                  ...ICON_OPTIONS,\n                  color: 'red',\n                  loadRate: plantRatio(plant, currentDate),\n                  notif: hasNotif(plant),\n                })\n              : new Leaflet.DivIcon.SVGIcon.IndicatorIcon({\n                  ...ICON_OPTIONS,\n                  loadRate: plantRatio(plant, currentDate),\n                  notif: hasNotif(plant),\n                })\n          }\n          onClick={() => onPlantClick(plant)}\n        />\n      ))}\n      {rivers.map(river => (\n        <GeoJSON key={river.name} data={river} />\n      ))}\n    </Map>\n  );\n}\n\nPlantMap.propTypes = {\n  plants: PropTypes.arrayOf(PlantType).isRequired,\n  // eslint-disable-next-line react/forbid-prop-types\n  rivers: PropTypes.array.isRequired,\n  currentPlantId: PropTypes.string,\n  onPlantClick: PropTypes.func.isRequired,\n  drawerHeight: PropTypes.number.isRequired,\n  currentDate: PropTypes.string.isRequired,\n};\n\nPlantMap.defaultProps = {\n  currentPlantId: null,\n};\n\nconst ConnectedPlantMap = connect((state, props) => {\n  return {\n    plants: plantsSelector({ date: props.currentDate }, state),\n    rivers: riversSelector(state),\n  };\n})(PlantMap);\n\nexport default ConnectedPlantMap;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport moment from 'moment';\nimport { withState } from 'recompose';\n\nimport { DatePicker as DesktopDatePicker } from 'antd';\nimport { DatePicker as MobileDatePicker } from 'antd-mobile';\n\nimport { isMobileOrTablet } from '../utils/index';\n\nconst PROP_TYPES = {\n  value: PropTypes.string.isRequired,\n  children: PropTypes.node.isRequired,\n  onDate: PropTypes.func.isRequired,\n};\n\nconst MIN_DATE = moment('2012-01-01').toDate();\nconst MAX_DATE = moment()\n  .endOf('day')\n  .toDate();\n\nfunction WrappedDesktopDatePicker(props) {\n  const { children, isOpen, setIsOpen, value, onDate } = props;\n  return (\n    <div>\n      <div\n        role=\"button\"\n        tabIndex=\"0\"\n        onKeyDown={() => {}}\n        onClick={() => setIsOpen(!isOpen)}\n      >\n        {children}\n      </div>\n\n      <DesktopDatePicker\n        open={isOpen}\n        style={{ display: 'none' }}\n        defaultValue={moment(value)}\n        disabledDate={\n          current =>\n            moment().isBefore(current) || moment(MIN_DATE).isAfter(current)\n          // eslint-disable-next-line react/jsx-curly-newline\n        }\n        showTime={{\n          minuteStep: 60,\n          secondStep: 60,\n        }}\n        onOk={date => {\n          setIsOpen(false);\n          onDate(date);\n        }}\n      />\n    </div>\n  );\n}\n\nWrappedDesktopDatePicker.propTypes = {\n  ...PROP_TYPES,\n  isOpen: PropTypes.bool.isRequired,\n  setIsOpen: PropTypes.bool.isRequired,\n};\n\nconst DesktopDatePickerContainer = withState('isOpen', 'setIsOpen', false)(\n  WrappedDesktopDatePicker,\n);\n\nfunction DatePicker(props) {\n  const { value, children, onDate } = props;\n\n  if (isMobileOrTablet()) {\n    return (\n      <MobileDatePicker\n        locale={{\n          okText: 'OK',\n          dismissText: 'Today',\n          DatePickerLocale: {\n            year: '',\n            month: '',\n            day: '',\n            hour: 'h',\n            minute: '',\n          },\n        }}\n        onOk={onDate}\n        onDismiss={onDate}\n        value={moment(value)\n          .minutes(0)\n          .toDate()}\n        minuteStep={60}\n        minDate={MIN_DATE}\n        maxDate={MAX_DATE}\n      >\n        {children}\n      </MobileDatePicker>\n    );\n  }\n\n  return (\n    <DesktopDatePickerContainer value={value} onDate={onDate}>\n      {children}\n    </DesktopDatePickerContainer>\n  );\n}\n\nDatePicker.propTypes = {\n  ...PROP_TYPES,\n};\n\nexport default DatePicker;\n","import { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { omit, equals } from 'ramda';\n\nclass Loader extends Component {\n  componentDidMount() {\n    const { load, ...otherProps } = this.props;\n\n    load(otherProps);\n  }\n\n  componentDidUpdate(prevProps) {\n    const prevOtherProps = omit(['load'], prevProps);\n    const { load, ...otherProps } = this.props;\n\n    if (!equals(prevOtherProps, otherProps)) {\n      load(otherProps);\n    }\n  }\n\n  render() {\n    return null;\n  }\n}\n\nLoader.propTypes = {\n  load: PropTypes.func.isRequired,\n};\n\nfunction buildLoader(loadFunction) {\n  return connect(\n    null,\n    { load: loadFunction },\n  )(Loader);\n}\n\nexport default buildLoader;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport moment from 'moment';\n\nimport {\n  Route, // as BaseRoute,\n  Switch,\n  Redirect,\n  withRouter,\n  matchPath,\n} from 'react-router-dom';\nimport { Layout, Spin, Row, Col, Drawer, Menu, Icon } from 'antd';\n\nimport HomeView from '../views/HomeView';\nimport AboutView from '../views/AboutView';\nimport MixView from '../views/MixView';\nimport PlantView from '../views/PlantView';\n\nimport Link from './Link';\nimport PlantMap from './PlantMap';\nimport DatePicker from './DatePicker';\n\nimport buildLoader from '../HOC/buildLoader';\nimport { loadAllPlants, plantsLoadedSelector } from '../store/plants';\n\nimport { loadAllReactors, reactorsLoadedSelector } from '../store/reactors';\nimport {\n  loadAllProductions,\n  productionsLoadedSelector,\n  productionsErrorSelector,\n} from '../store/productions';\nimport { loadAllMix, mixLoadedSelector, mixErrorSelector } from '../store/mix';\n\nimport {\n  testScreenType,\n  HEADER_HEIGHT,\n  DRAWER_WIDTH,\n  getWindowHeight,\n} from '../utils';\nimport {\n  loadAllUnavailabilities,\n  unavailabilitiesLoadedSelector,\n  unavailabilitiesErrorSelector,\n} from '../store/unavailabilities';\nimport { loadAllRivers, riversLoadedSelector } from '../store/rivers';\nimport { getCurrentDate } from '../store/otherSelectors';\n\nconst PlantsLoader = buildLoader(loadAllPlants);\nconst ReactorsLoader = buildLoader(loadAllReactors);\nconst ProductionsLoader = buildLoader(loadAllProductions);\nconst MixLoader = buildLoader(loadAllMix);\nconst UnavailabilitiesLoader = buildLoader(loadAllUnavailabilities);\nconst RiversLoader = buildLoader(loadAllRivers);\n\nfunction AppLayout(props) {\n  const {\n    isLoaded,\n    error,\n\n    currentPlantId,\n    currentLocation,\n    currentDate,\n\n    isFullPage,\n    goTo,\n  } = props;\n  const isSmallScreen = !testScreenType('sm');\n  const drawerHeight = isFullPage ? getWindowHeight() - HEADER_HEIGHT : 220;\n\n  return (\n    <div className=\"AppLayout\">\n      <PlantsLoader />\n      <ReactorsLoader />\n      <RiversLoader />\n\n      <ProductionsLoader date={currentDate} />\n      <MixLoader date={currentDate} />\n      <UnavailabilitiesLoader date={currentDate} />\n      <Spin\n        size=\"large\"\n        spinning={!isLoaded}\n        indicator={\n          // eslint-disable-next-line react/jsx-wrap-multilines\n          <div>\n            <img\n              className=\"AppLayout__loadingIcon\"\n              src=\"loading_icon.svg\"\n              alt=\"\"\n            />\n            {error && (\n              <div className=\"AppLayout__errorMessage\">\n                Une erreur est survenue, veuillez essayer dans quelques minutes\n              </div>\n            )}\n          </div>\n        }\n      >\n        {!isLoaded && <div className=\"AppLayout__splash\" />}\n        {isLoaded && (\n          <Layout>\n            <Drawer\n              title={null}\n              visible\n              placement={isSmallScreen ? 'top' : 'left'}\n              style={{ marginTop: HEADER_HEIGHT }}\n              mask={false}\n              closable={false}\n              width={DRAWER_WIDTH}\n              height={drawerHeight}\n              bodyStyle={{ padding: 0 }}\n              drawerStyle={{ transition: 'height 2s ease' }}\n            >\n              <Switch>\n                <Route path=\"/home\" exact component={HomeView} />\n                <Route path=\"/mix\" exact component={MixView} />\n                <Route path=\"/about\" exact component={AboutView} />\n                <Route path=\"/plant/:plantId\" component={PlantView} />\n                <Route\n                  component={() => <Redirect to={{ pathname: '/home' }} />}\n                />\n              </Switch>\n            </Drawer>\n            <Row>\n              <Col span={24}>\n                <Layout.Header className=\"AppLayout__header\">\n                  <Menu\n                    theme=\"dark\"\n                    mode=\"horizontal\"\n                    className=\"AppLayout__menu\"\n                    selectable={false}\n                  >\n                    <Menu.SubMenu\n                      title={\n                        // eslint-disable-next-line react/jsx-wrap-multilines\n                        <span>\n                          <Icon type=\"menu\" />\n                          <strong>Nuclear monitor</strong>\n                        </span>\n                      }\n                      popupClassName=\"AppLayout__submenu\"\n                    >\n                      <Menu.Item key=\"home\">\n                        <Link to=\"/home\">Accueil</Link>\n                      </Menu.Item>\n                      <Menu.Item key=\"mix\">\n                        <Link to=\"/mix\">Mix</Link>\n                      </Menu.Item>\n                      <Menu.Item key=\"about\">\n                        <Link to=\"/about\">À propos</Link>\n                      </Menu.Item>\n                    </Menu.SubMenu>\n                  </Menu>\n                  <DatePicker\n                    onDate={\n                      v =>\n                        moment(v).isSame(moment(), 'day')\n                          ? goTo(`${currentLocation}`, false)\n                          : goTo(\n                              `${currentLocation}?date=${moment(\n                                v,\n                              ).toISOString()}`,\n                              false,\n                            )\n                      // eslint-disable-next-line react/jsx-curly-newline\n                    }\n                    value={currentDate}\n                  >\n                    <div className=\"AppLayout__header__date\">\n                      <div className=\"AppLayout__header__date__text\">\n                        <div>\n                          {moment(currentDate).format('dddd DD/MM/YYYY')}\n                        </div>\n                        <div>{moment(currentDate).format('à HH:00')}</div>\n                      </div>\n\n                      <div className=\"AppLayout__header__date__calendar\">\n                        <Icon\n                          type=\"calendar\"\n                          theme=\"twoTone\"\n                          twoToneColor=\"white\"\n                        />\n                      </div>\n                    </div>\n                  </DatePicker>\n                </Layout.Header>\n\n                <Layout.Content className=\"AppLayout__content\">\n                  <PlantMap\n                    currentDate={currentDate}\n                    currentPlantId={currentPlantId}\n                    onPlantClick={plant => goTo(`/plant/${plant.id}`)}\n                    drawerHeight={drawerHeight}\n                  />\n                </Layout.Content>\n              </Col>\n            </Row>\n          </Layout>\n        )}\n      </Spin>\n    </div>\n  );\n}\n\nAppLayout.propTypes = {\n  isLoaded: PropTypes.bool.isRequired,\n  // eslint-disable-next-line react/forbid-prop-types\n  error: PropTypes.object,\n\n  goTo: PropTypes.func.isRequired,\n  currentLocation: PropTypes.string.isRequired,\n  currentDate: PropTypes.string.isRequired,\n\n  isFullPage: PropTypes.bool.isRequired,\n  currentPlantId: PropTypes.string,\n};\n\nAppLayout.defaultProps = {\n  currentPlantId: null,\n  error: null,\n};\n\n// withRouter needed to prevent blocking\nexport default withRouter(\n  connect((state, props) => {\n    const matchPlantPath = matchPath(props.location.pathname, {\n      path: '/plant/:id',\n      exact: false,\n    });\n    const currentDate = getCurrentDate(props.location);\n\n    const mixError = mixErrorSelector({ date: currentDate }, state);\n    const prodError = productionsErrorSelector({ date: currentDate }, state);\n    const unavailabilitiesError = unavailabilitiesErrorSelector(\n      { date: currentDate },\n      state,\n    );\n\n    return {\n      isLoaded:\n        (plantsLoadedSelector(state) &&\n          reactorsLoadedSelector(state) &&\n          productionsLoadedSelector({ date: currentDate }, state) &&\n          mixLoadedSelector({ date: currentDate }, state) &&\n          unavailabilitiesLoadedSelector({ date: currentDate }, state) &&\n          riversLoadedSelector(state)) ||\n        false,\n      error: prodError || unavailabilitiesError || mixError,\n\n      goTo: (url, withSearch = true) =>\n        props.history.push(`${url}${withSearch ? props.location.search : ''}`),\n      currentLocation: props.location.pathname,\n      currentPlantId: matchPlantPath && matchPlantPath.params.id,\n      currentDate,\n\n      isFullPage: !!matchPath(props.location.pathname, {\n        path: ['/plant/:id/:reactorIndex', '/mix', '/about'],\n      }),\n    };\n  })(AppLayout),\n);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { withRouter } from 'react-router-dom';\nimport { compose, withProps } from 'recompose';\n\nimport ga from 'react-ga';\n\nconst f = title => (...args) => console.log(title, ...args);\nconst mockGa = {\n  set: () => {},\n  pageview: f('tracker.pageview'),\n};\n\nconst isDev = process.env.NODE_ENV !== 'production';\nconst tracker = isDev ? mockGa : ga;\n\nif (!isDev) ga.initialize('UA-153111142-1', { siteSpeedSampleRate: 100 });\n\nclass AnalyticsComponent extends Component {\n  componentDidMount() {\n    this.trackPage();\n  }\n\n  componentDidUpdate(prevProps) {\n    const { location } = this.props;\n\n    if (location !== prevProps.location) {\n      this.trackPage();\n    }\n  }\n\n  trackPage() {\n    const { location } = this.props;\n    tracker.set({ location });\n    tracker.pageview(location);\n  }\n\n  render() {\n    const { children } = this.props;\n    return <div>{children}</div>;\n  }\n}\n\nAnalyticsComponent.propTypes = {\n  // eslint-disable-next-line react/forbid-prop-types\n  children: PropTypes.any.isRequired,\n  location: PropTypes.string.isRequired,\n};\n\nexport default compose(\n  withRouter,\n  withProps(props => ({\n    location: `${props.location.pathname}${props.location.search}`,\n  })),\n)(AnalyticsComponent);\n","import React from 'react';\nimport { Provider } from 'react-redux';\nimport { HashRouter as Router, Route } from 'react-router-dom';\nimport moment from 'moment';\nimport 'moment/locale/fr';\n\nimport store from './store';\n\nimport AppLayout from './components/AppLayout';\nimport AnalyticsComponent from './components/AnalyticsComponent';\n\nmoment.locale('fr');\nmoment.tz.setDefault('Europe/Paris');\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Provider store={store}>\n        <Router>\n          <Route path=\"/\">\n            <AnalyticsComponent>\n              <AppLayout />\n            </AnalyticsComponent>\n          </Route>\n        </Router>\n      </Provider>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport './utils/svg-icons';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\n// eslint-disable-next-line react/jsx-filename-extension\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}